"use strict";(()=>{var Qt=Object.create;var Mt=Object.defineProperty;var te=Object.getOwnPropertyDescriptor;var ee=Object.getOwnPropertyNames;var re=Object.getPrototypeOf,ne=Object.prototype.hasOwnProperty;var wt=(c=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(c,{get:(u,a)=>(typeof require<"u"?require:u)[a]}):c)(function(c){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+c+'" is not supported')});var ie=(c,u)=>()=>(u||c((u={exports:{}}).exports,u),u.exports);var ae=(c,u,a,e)=>{if(u&&typeof u=="object"||typeof u=="function")for(let r of ee(u))!ne.call(c,r)&&r!==a&&Mt(c,r,{get:()=>u[r],enumerable:!(e=te(u,r))||e.enumerable});return c};var se=(c,u,a)=>(a=c!=null?Qt(re(c)):{},ae(u||!c||!c.__esModule?Mt(a,"default",{value:c,enumerable:!0}):a,c));var Wt=ie((Ht,Bt)=>{(function(c){typeof Ht=="object"&&typeof Bt<"u"?Bt.exports=c():typeof define=="function"&&define.amd?define([],c):(typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this).JSZip=c()})(function(){return function c(u,a,e){function r(_,y){if(!a[_]){if(!u[_]){var p=typeof wt=="function"&&wt;if(!y&&p)return p(_,!0);if(i)return i(_,!0);var w=new Error("Cannot find module '"+_+"'");throw w.code="MODULE_NOT_FOUND",w}var o=a[_]={exports:{}};u[_][0].call(o.exports,function(f){var s=u[_][1][f];return r(s||f)},o,o.exports,c,u,a,e)}return a[_].exports}for(var i=typeof wt=="function"&&wt,l=0;l<e.length;l++)r(e[l]);return r}({1:[function(c,u,a){"use strict";var e=c("./utils"),r=c("./support"),i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";a.encode=function(l){for(var _,y,p,w,o,f,s,m=[],d=0,b=l.length,k=b,S=e.getTypeOf(l)!=="string";d<l.length;)k=b-d,p=S?(_=l[d++],y=d<b?l[d++]:0,d<b?l[d++]:0):(_=l.charCodeAt(d++),y=d<b?l.charCodeAt(d++):0,d<b?l.charCodeAt(d++):0),w=_>>2,o=(3&_)<<4|y>>4,f=1<k?(15&y)<<2|p>>6:64,s=2<k?63&p:64,m.push(i.charAt(w)+i.charAt(o)+i.charAt(f)+i.charAt(s));return m.join("")},a.decode=function(l){var _,y,p,w,o,f,s=0,m=0,d="data:";if(l.substr(0,d.length)===d)throw new Error("Invalid base64 input, it looks like a data url.");var b,k=3*(l=l.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(l.charAt(l.length-1)===i.charAt(64)&&k--,l.charAt(l.length-2)===i.charAt(64)&&k--,k%1!=0)throw new Error("Invalid base64 input, bad content length.");for(b=r.uint8array?new Uint8Array(0|k):new Array(0|k);s<l.length;)_=i.indexOf(l.charAt(s++))<<2|(w=i.indexOf(l.charAt(s++)))>>4,y=(15&w)<<4|(o=i.indexOf(l.charAt(s++)))>>2,p=(3&o)<<6|(f=i.indexOf(l.charAt(s++))),b[m++]=_,o!==64&&(b[m++]=y),f!==64&&(b[m++]=p);return b}},{"./support":30,"./utils":32}],2:[function(c,u,a){"use strict";var e=c("./external"),r=c("./stream/DataWorker"),i=c("./stream/Crc32Probe"),l=c("./stream/DataLengthProbe");function _(y,p,w,o,f){this.compressedSize=y,this.uncompressedSize=p,this.crc32=w,this.compression=o,this.compressedContent=f}_.prototype={getContentWorker:function(){var y=new r(e.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new l("data_length")),p=this;return y.on("end",function(){if(this.streamInfo.data_length!==p.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),y},getCompressedWorker:function(){return new r(e.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},_.createWorkerFrom=function(y,p,w){return y.pipe(new i).pipe(new l("uncompressedSize")).pipe(p.compressWorker(w)).pipe(new l("compressedSize")).withStreamInfo("compression",p)},u.exports=_},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(c,u,a){"use strict";var e=c("./stream/GenericWorker");a.STORE={magic:"\0\0",compressWorker:function(){return new e("STORE compression")},uncompressWorker:function(){return new e("STORE decompression")}},a.DEFLATE=c("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(c,u,a){"use strict";var e=c("./utils"),r=function(){for(var i,l=[],_=0;_<256;_++){i=_;for(var y=0;y<8;y++)i=1&i?3988292384^i>>>1:i>>>1;l[_]=i}return l}();u.exports=function(i,l){return i!==void 0&&i.length?e.getTypeOf(i)!=="string"?function(_,y,p,w){var o=r,f=w+p;_^=-1;for(var s=w;s<f;s++)_=_>>>8^o[255&(_^y[s])];return-1^_}(0|l,i,i.length,0):function(_,y,p,w){var o=r,f=w+p;_^=-1;for(var s=w;s<f;s++)_=_>>>8^o[255&(_^y.charCodeAt(s))];return-1^_}(0|l,i,i.length,0):0}},{"./utils":32}],5:[function(c,u,a){"use strict";a.base64=!1,a.binary=!1,a.dir=!1,a.createFolders=!0,a.date=null,a.compression=null,a.compressionOptions=null,a.comment=null,a.unixPermissions=null,a.dosPermissions=null},{}],6:[function(c,u,a){"use strict";var e=null;e=typeof Promise<"u"?Promise:c("lie"),u.exports={Promise:e}},{lie:37}],7:[function(c,u,a){"use strict";var e=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",r=c("pako"),i=c("./utils"),l=c("./stream/GenericWorker"),_=e?"uint8array":"array";function y(p,w){l.call(this,"FlateWorker/"+p),this._pako=null,this._pakoAction=p,this._pakoOptions=w,this.meta={}}a.magic="\b\0",i.inherits(y,l),y.prototype.processChunk=function(p){this.meta=p.meta,this._pako===null&&this._createPako(),this._pako.push(i.transformTo(_,p.data),!1)},y.prototype.flush=function(){l.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},y.prototype.cleanUp=function(){l.prototype.cleanUp.call(this),this._pako=null},y.prototype._createPako=function(){this._pako=new r[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var p=this;this._pako.onData=function(w){p.push({data:w,meta:p.meta})}},a.compressWorker=function(p){return new y("Deflate",p)},a.uncompressWorker=function(){return new y("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(c,u,a){"use strict";function e(o,f){var s,m="";for(s=0;s<f;s++)m+=String.fromCharCode(255&o),o>>>=8;return m}function r(o,f,s,m,d,b){var k,S,E=o.file,D=o.compression,O=b!==_.utf8encode,N=i.transformTo("string",b(E.name)),T=i.transformTo("string",_.utf8encode(E.name)),W=E.comment,X=i.transformTo("string",b(W)),v=i.transformTo("string",_.utf8encode(W)),L=T.length!==E.name.length,n=v.length!==W.length,B="",V="",M="",J=E.dir,U=E.date,Y={crc32:0,compressedSize:0,uncompressedSize:0};f&&!s||(Y.crc32=o.crc32,Y.compressedSize=o.compressedSize,Y.uncompressedSize=o.uncompressedSize);var A=0;f&&(A|=8),O||!L&&!n||(A|=2048);var C=0,K=0;J&&(C|=16),d==="UNIX"?(K=798,C|=function(Z,nt){var ot=Z;return Z||(ot=nt?16893:33204),(65535&ot)<<16}(E.unixPermissions,J)):(K=20,C|=function(Z){return 63&(Z||0)}(E.dosPermissions)),k=U.getUTCHours(),k<<=6,k|=U.getUTCMinutes(),k<<=5,k|=U.getUTCSeconds()/2,S=U.getUTCFullYear()-1980,S<<=4,S|=U.getUTCMonth()+1,S<<=5,S|=U.getUTCDate(),L&&(V=e(1,1)+e(y(N),4)+T,B+="up"+e(V.length,2)+V),n&&(M=e(1,1)+e(y(X),4)+v,B+="uc"+e(M.length,2)+M);var $="";return $+=`
\0`,$+=e(A,2),$+=D.magic,$+=e(k,2),$+=e(S,2),$+=e(Y.crc32,4),$+=e(Y.compressedSize,4),$+=e(Y.uncompressedSize,4),$+=e(N.length,2),$+=e(B.length,2),{fileRecord:p.LOCAL_FILE_HEADER+$+N+B,dirRecord:p.CENTRAL_FILE_HEADER+e(K,2)+$+e(X.length,2)+"\0\0\0\0"+e(C,4)+e(m,4)+N+B+X}}var i=c("../utils"),l=c("../stream/GenericWorker"),_=c("../utf8"),y=c("../crc32"),p=c("../signature");function w(o,f,s,m){l.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=f,this.zipPlatform=s,this.encodeFileName=m,this.streamFiles=o,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}i.inherits(w,l),w.prototype.push=function(o){var f=o.meta.percent||0,s=this.entriesCount,m=this._sources.length;this.accumulate?this.contentBuffer.push(o):(this.bytesWritten+=o.data.length,l.prototype.push.call(this,{data:o.data,meta:{currentFile:this.currentFile,percent:s?(f+100*(s-m-1))/s:100}}))},w.prototype.openedSource=function(o){this.currentSourceOffset=this.bytesWritten,this.currentFile=o.file.name;var f=this.streamFiles&&!o.file.dir;if(f){var s=r(o,f,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:s.fileRecord,meta:{percent:0}})}else this.accumulate=!0},w.prototype.closedSource=function(o){this.accumulate=!1;var f=this.streamFiles&&!o.file.dir,s=r(o,f,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(s.dirRecord),f)this.push({data:function(m){return p.DATA_DESCRIPTOR+e(m.crc32,4)+e(m.compressedSize,4)+e(m.uncompressedSize,4)}(o),meta:{percent:100}});else for(this.push({data:s.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},w.prototype.flush=function(){for(var o=this.bytesWritten,f=0;f<this.dirRecords.length;f++)this.push({data:this.dirRecords[f],meta:{percent:100}});var s=this.bytesWritten-o,m=function(d,b,k,S,E){var D=i.transformTo("string",E(S));return p.CENTRAL_DIRECTORY_END+"\0\0\0\0"+e(d,2)+e(d,2)+e(b,4)+e(k,4)+e(D.length,2)+D}(this.dirRecords.length,s,o,this.zipComment,this.encodeFileName);this.push({data:m,meta:{percent:100}})},w.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},w.prototype.registerPrevious=function(o){this._sources.push(o);var f=this;return o.on("data",function(s){f.processChunk(s)}),o.on("end",function(){f.closedSource(f.previous.streamInfo),f._sources.length?f.prepareNextSource():f.end()}),o.on("error",function(s){f.error(s)}),this},w.prototype.resume=function(){return!!l.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},w.prototype.error=function(o){var f=this._sources;if(!l.prototype.error.call(this,o))return!1;for(var s=0;s<f.length;s++)try{f[s].error(o)}catch{}return!0},w.prototype.lock=function(){l.prototype.lock.call(this);for(var o=this._sources,f=0;f<o.length;f++)o[f].lock()},u.exports=w},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(c,u,a){"use strict";var e=c("../compressions"),r=c("./ZipFileWorker");a.generateWorker=function(i,l,_){var y=new r(l.streamFiles,_,l.platform,l.encodeFileName),p=0;try{i.forEach(function(w,o){p++;var f=function(b,k){var S=b||k,E=e[S];if(!E)throw new Error(S+" is not a valid compression method !");return E}(o.options.compression,l.compression),s=o.options.compressionOptions||l.compressionOptions||{},m=o.dir,d=o.date;o._compressWorker(f,s).withStreamInfo("file",{name:w,dir:m,date:d,comment:o.comment||"",unixPermissions:o.unixPermissions,dosPermissions:o.dosPermissions}).pipe(y)}),y.entriesCount=p}catch(w){y.error(w)}return y}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(c,u,a){"use strict";function e(){if(!(this instanceof e))return new e;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var r=new e;for(var i in this)typeof this[i]!="function"&&(r[i]=this[i]);return r}}(e.prototype=c("./object")).loadAsync=c("./load"),e.support=c("./support"),e.defaults=c("./defaults"),e.version="3.10.1",e.loadAsync=function(r,i){return new e().loadAsync(r,i)},e.external=c("./external"),u.exports=e},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(c,u,a){"use strict";var e=c("./utils"),r=c("./external"),i=c("./utf8"),l=c("./zipEntries"),_=c("./stream/Crc32Probe"),y=c("./nodejsUtils");function p(w){return new r.Promise(function(o,f){var s=w.decompressed.getContentWorker().pipe(new _);s.on("error",function(m){f(m)}).on("end",function(){s.streamInfo.crc32!==w.decompressed.crc32?f(new Error("Corrupted zip : CRC32 mismatch")):o()}).resume()})}u.exports=function(w,o){var f=this;return o=e.extend(o||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:i.utf8decode}),y.isNode&&y.isStream(w)?r.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):e.prepareContent("the loaded zip file",w,!0,o.optimizedBinaryString,o.base64).then(function(s){var m=new l(o);return m.load(s),m}).then(function(s){var m=[r.Promise.resolve(s)],d=s.files;if(o.checkCRC32)for(var b=0;b<d.length;b++)m.push(p(d[b]));return r.Promise.all(m)}).then(function(s){for(var m=s.shift(),d=m.files,b=0;b<d.length;b++){var k=d[b],S=k.fileNameStr,E=e.resolve(k.fileNameStr);f.file(E,k.decompressed,{binary:!0,optimizedBinaryString:!0,date:k.date,dir:k.dir,comment:k.fileCommentStr.length?k.fileCommentStr:null,unixPermissions:k.unixPermissions,dosPermissions:k.dosPermissions,createFolders:o.createFolders}),k.dir||(f.file(E).unsafeOriginalName=S)}return m.zipComment.length&&(f.comment=m.zipComment),f})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(c,u,a){"use strict";var e=c("../utils"),r=c("../stream/GenericWorker");function i(l,_){r.call(this,"Nodejs stream input adapter for "+l),this._upstreamEnded=!1,this._bindStream(_)}e.inherits(i,r),i.prototype._bindStream=function(l){var _=this;(this._stream=l).pause(),l.on("data",function(y){_.push({data:y,meta:{percent:0}})}).on("error",function(y){_.isPaused?this.generatedError=y:_.error(y)}).on("end",function(){_.isPaused?_._upstreamEnded=!0:_.end()})},i.prototype.pause=function(){return!!r.prototype.pause.call(this)&&(this._stream.pause(),!0)},i.prototype.resume=function(){return!!r.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},u.exports=i},{"../stream/GenericWorker":28,"../utils":32}],13:[function(c,u,a){"use strict";var e=c("readable-stream").Readable;function r(i,l,_){e.call(this,l),this._helper=i;var y=this;i.on("data",function(p,w){y.push(p)||y._helper.pause(),_&&_(w)}).on("error",function(p){y.emit("error",p)}).on("end",function(){y.push(null)})}c("../utils").inherits(r,e),r.prototype._read=function(){this._helper.resume()},u.exports=r},{"../utils":32,"readable-stream":16}],14:[function(c,u,a){"use strict";u.exports={isNode:typeof Buffer<"u",newBufferFrom:function(e,r){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(e,r);if(typeof e=="number")throw new Error('The "data" argument must not be a number');return new Buffer(e,r)},allocBuffer:function(e){if(Buffer.alloc)return Buffer.alloc(e);var r=new Buffer(e);return r.fill(0),r},isBuffer:function(e){return Buffer.isBuffer(e)},isStream:function(e){return e&&typeof e.on=="function"&&typeof e.pause=="function"&&typeof e.resume=="function"}}},{}],15:[function(c,u,a){"use strict";function e(E,D,O){var N,T=i.getTypeOf(D),W=i.extend(O||{},y);W.date=W.date||new Date,W.compression!==null&&(W.compression=W.compression.toUpperCase()),typeof W.unixPermissions=="string"&&(W.unixPermissions=parseInt(W.unixPermissions,8)),W.unixPermissions&&16384&W.unixPermissions&&(W.dir=!0),W.dosPermissions&&16&W.dosPermissions&&(W.dir=!0),W.dir&&(E=d(E)),W.createFolders&&(N=m(E))&&b.call(this,N,!0);var X=T==="string"&&W.binary===!1&&W.base64===!1;O&&O.binary!==void 0||(W.binary=!X),(D instanceof p&&D.uncompressedSize===0||W.dir||!D||D.length===0)&&(W.base64=!1,W.binary=!0,D="",W.compression="STORE",T="string");var v=null;v=D instanceof p||D instanceof l?D:f.isNode&&f.isStream(D)?new s(E,D):i.prepareContent(E,D,W.binary,W.optimizedBinaryString,W.base64);var L=new w(E,v,W);this.files[E]=L}var r=c("./utf8"),i=c("./utils"),l=c("./stream/GenericWorker"),_=c("./stream/StreamHelper"),y=c("./defaults"),p=c("./compressedObject"),w=c("./zipObject"),o=c("./generate"),f=c("./nodejsUtils"),s=c("./nodejs/NodejsStreamInputAdapter"),m=function(E){E.slice(-1)==="/"&&(E=E.substring(0,E.length-1));var D=E.lastIndexOf("/");return 0<D?E.substring(0,D):""},d=function(E){return E.slice(-1)!=="/"&&(E+="/"),E},b=function(E,D){return D=D!==void 0?D:y.createFolders,E=d(E),this.files[E]||e.call(this,E,null,{dir:!0,createFolders:D}),this.files[E]};function k(E){return Object.prototype.toString.call(E)==="[object RegExp]"}var S={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(E){var D,O,N;for(D in this.files)N=this.files[D],(O=D.slice(this.root.length,D.length))&&D.slice(0,this.root.length)===this.root&&E(O,N)},filter:function(E){var D=[];return this.forEach(function(O,N){E(O,N)&&D.push(N)}),D},file:function(E,D,O){if(arguments.length!==1)return E=this.root+E,e.call(this,E,D,O),this;if(k(E)){var N=E;return this.filter(function(W,X){return!X.dir&&N.test(W)})}var T=this.files[this.root+E];return T&&!T.dir?T:null},folder:function(E){if(!E)return this;if(k(E))return this.filter(function(T,W){return W.dir&&E.test(T)});var D=this.root+E,O=b.call(this,D),N=this.clone();return N.root=O.name,N},remove:function(E){E=this.root+E;var D=this.files[E];if(D||(E.slice(-1)!=="/"&&(E+="/"),D=this.files[E]),D&&!D.dir)delete this.files[E];else for(var O=this.filter(function(T,W){return W.name.slice(0,E.length)===E}),N=0;N<O.length;N++)delete this.files[O[N].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(E){var D,O={};try{if((O=i.extend(E||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:r.utf8encode})).type=O.type.toLowerCase(),O.compression=O.compression.toUpperCase(),O.type==="binarystring"&&(O.type="string"),!O.type)throw new Error("No output type specified.");i.checkSupport(O.type),O.platform!=="darwin"&&O.platform!=="freebsd"&&O.platform!=="linux"&&O.platform!=="sunos"||(O.platform="UNIX"),O.platform==="win32"&&(O.platform="DOS");var N=O.comment||this.comment||"";D=o.generateWorker(this,O,N)}catch(T){(D=new l("error")).error(T)}return new _(D,O.type||"string",O.mimeType)},generateAsync:function(E,D){return this.generateInternalStream(E).accumulate(D)},generateNodeStream:function(E,D){return(E=E||{}).type||(E.type="nodebuffer"),this.generateInternalStream(E).toNodejsStream(D)}};u.exports=S},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(c,u,a){"use strict";u.exports=c("stream")},{stream:void 0}],17:[function(c,u,a){"use strict";var e=c("./DataReader");function r(i){e.call(this,i);for(var l=0;l<this.data.length;l++)i[l]=255&i[l]}c("../utils").inherits(r,e),r.prototype.byteAt=function(i){return this.data[this.zero+i]},r.prototype.lastIndexOfSignature=function(i){for(var l=i.charCodeAt(0),_=i.charCodeAt(1),y=i.charCodeAt(2),p=i.charCodeAt(3),w=this.length-4;0<=w;--w)if(this.data[w]===l&&this.data[w+1]===_&&this.data[w+2]===y&&this.data[w+3]===p)return w-this.zero;return-1},r.prototype.readAndCheckSignature=function(i){var l=i.charCodeAt(0),_=i.charCodeAt(1),y=i.charCodeAt(2),p=i.charCodeAt(3),w=this.readData(4);return l===w[0]&&_===w[1]&&y===w[2]&&p===w[3]},r.prototype.readData=function(i){if(this.checkOffset(i),i===0)return[];var l=this.data.slice(this.zero+this.index,this.zero+this.index+i);return this.index+=i,l},u.exports=r},{"../utils":32,"./DataReader":18}],18:[function(c,u,a){"use strict";var e=c("../utils");function r(i){this.data=i,this.length=i.length,this.index=0,this.zero=0}r.prototype={checkOffset:function(i){this.checkIndex(this.index+i)},checkIndex:function(i){if(this.length<this.zero+i||i<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+i+"). Corrupted zip ?")},setIndex:function(i){this.checkIndex(i),this.index=i},skip:function(i){this.setIndex(this.index+i)},byteAt:function(){},readInt:function(i){var l,_=0;for(this.checkOffset(i),l=this.index+i-1;l>=this.index;l--)_=(_<<8)+this.byteAt(l);return this.index+=i,_},readString:function(i){return e.transformTo("string",this.readData(i))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var i=this.readInt(4);return new Date(Date.UTC(1980+(i>>25&127),(i>>21&15)-1,i>>16&31,i>>11&31,i>>5&63,(31&i)<<1))}},u.exports=r},{"../utils":32}],19:[function(c,u,a){"use strict";var e=c("./Uint8ArrayReader");function r(i){e.call(this,i)}c("../utils").inherits(r,e),r.prototype.readData=function(i){this.checkOffset(i);var l=this.data.slice(this.zero+this.index,this.zero+this.index+i);return this.index+=i,l},u.exports=r},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(c,u,a){"use strict";var e=c("./DataReader");function r(i){e.call(this,i)}c("../utils").inherits(r,e),r.prototype.byteAt=function(i){return this.data.charCodeAt(this.zero+i)},r.prototype.lastIndexOfSignature=function(i){return this.data.lastIndexOf(i)-this.zero},r.prototype.readAndCheckSignature=function(i){return i===this.readData(4)},r.prototype.readData=function(i){this.checkOffset(i);var l=this.data.slice(this.zero+this.index,this.zero+this.index+i);return this.index+=i,l},u.exports=r},{"../utils":32,"./DataReader":18}],21:[function(c,u,a){"use strict";var e=c("./ArrayReader");function r(i){e.call(this,i)}c("../utils").inherits(r,e),r.prototype.readData=function(i){if(this.checkOffset(i),i===0)return new Uint8Array(0);var l=this.data.subarray(this.zero+this.index,this.zero+this.index+i);return this.index+=i,l},u.exports=r},{"../utils":32,"./ArrayReader":17}],22:[function(c,u,a){"use strict";var e=c("../utils"),r=c("../support"),i=c("./ArrayReader"),l=c("./StringReader"),_=c("./NodeBufferReader"),y=c("./Uint8ArrayReader");u.exports=function(p){var w=e.getTypeOf(p);return e.checkSupport(w),w!=="string"||r.uint8array?w==="nodebuffer"?new _(p):r.uint8array?new y(e.transformTo("uint8array",p)):new i(e.transformTo("array",p)):new l(p)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(c,u,a){"use strict";a.LOCAL_FILE_HEADER="PK",a.CENTRAL_FILE_HEADER="PK",a.CENTRAL_DIRECTORY_END="PK",a.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",a.ZIP64_CENTRAL_DIRECTORY_END="PK",a.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(c,u,a){"use strict";var e=c("./GenericWorker"),r=c("../utils");function i(l){e.call(this,"ConvertWorker to "+l),this.destType=l}r.inherits(i,e),i.prototype.processChunk=function(l){this.push({data:r.transformTo(this.destType,l.data),meta:l.meta})},u.exports=i},{"../utils":32,"./GenericWorker":28}],25:[function(c,u,a){"use strict";var e=c("./GenericWorker"),r=c("../crc32");function i(){e.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}c("../utils").inherits(i,e),i.prototype.processChunk=function(l){this.streamInfo.crc32=r(l.data,this.streamInfo.crc32||0),this.push(l)},u.exports=i},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(c,u,a){"use strict";var e=c("../utils"),r=c("./GenericWorker");function i(l){r.call(this,"DataLengthProbe for "+l),this.propName=l,this.withStreamInfo(l,0)}e.inherits(i,r),i.prototype.processChunk=function(l){if(l){var _=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=_+l.data.length}r.prototype.processChunk.call(this,l)},u.exports=i},{"../utils":32,"./GenericWorker":28}],27:[function(c,u,a){"use strict";var e=c("../utils"),r=c("./GenericWorker");function i(l){r.call(this,"DataWorker");var _=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,l.then(function(y){_.dataIsReady=!0,_.data=y,_.max=y&&y.length||0,_.type=e.getTypeOf(y),_.isPaused||_._tickAndRepeat()},function(y){_.error(y)})}e.inherits(i,r),i.prototype.cleanUp=function(){r.prototype.cleanUp.call(this),this.data=null},i.prototype.resume=function(){return!!r.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,e.delay(this._tickAndRepeat,[],this)),!0)},i.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(e.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},i.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var l=null,_=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":l=this.data.substring(this.index,_);break;case"uint8array":l=this.data.subarray(this.index,_);break;case"array":case"nodebuffer":l=this.data.slice(this.index,_)}return this.index=_,this.push({data:l,meta:{percent:this.max?this.index/this.max*100:0}})},u.exports=i},{"../utils":32,"./GenericWorker":28}],28:[function(c,u,a){"use strict";function e(r){this.name=r||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}e.prototype={push:function(r){this.emit("data",r)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(r){this.emit("error",r)}return!0},error:function(r){return!this.isFinished&&(this.isPaused?this.generatedError=r:(this.isFinished=!0,this.emit("error",r),this.previous&&this.previous.error(r),this.cleanUp()),!0)},on:function(r,i){return this._listeners[r].push(i),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(r,i){if(this._listeners[r])for(var l=0;l<this._listeners[r].length;l++)this._listeners[r][l].call(this,i)},pipe:function(r){return r.registerPrevious(this)},registerPrevious:function(r){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=r.streamInfo,this.mergeStreamInfo(),this.previous=r;var i=this;return r.on("data",function(l){i.processChunk(l)}),r.on("end",function(){i.end()}),r.on("error",function(l){i.error(l)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var r=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),r=!0),this.previous&&this.previous.resume(),!r},flush:function(){},processChunk:function(r){this.push(r)},withStreamInfo:function(r,i){return this.extraStreamInfo[r]=i,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var r in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,r)&&(this.streamInfo[r]=this.extraStreamInfo[r])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var r="Worker "+this.name;return this.previous?this.previous+" -> "+r:r}},u.exports=e},{}],29:[function(c,u,a){"use strict";var e=c("../utils"),r=c("./ConvertWorker"),i=c("./GenericWorker"),l=c("../base64"),_=c("../support"),y=c("../external"),p=null;if(_.nodestream)try{p=c("../nodejs/NodejsStreamOutputAdapter")}catch{}function w(f,s){return new y.Promise(function(m,d){var b=[],k=f._internalType,S=f._outputType,E=f._mimeType;f.on("data",function(D,O){b.push(D),s&&s(O)}).on("error",function(D){b=[],d(D)}).on("end",function(){try{var D=function(O,N,T){switch(O){case"blob":return e.newBlob(e.transformTo("arraybuffer",N),T);case"base64":return l.encode(N);default:return e.transformTo(O,N)}}(S,function(O,N){var T,W=0,X=null,v=0;for(T=0;T<N.length;T++)v+=N[T].length;switch(O){case"string":return N.join("");case"array":return Array.prototype.concat.apply([],N);case"uint8array":for(X=new Uint8Array(v),T=0;T<N.length;T++)X.set(N[T],W),W+=N[T].length;return X;case"nodebuffer":return Buffer.concat(N);default:throw new Error("concat : unsupported type '"+O+"'")}}(k,b),E);m(D)}catch(O){d(O)}b=[]}).resume()})}function o(f,s,m){var d=s;switch(s){case"blob":case"arraybuffer":d="uint8array";break;case"base64":d="string"}try{this._internalType=d,this._outputType=s,this._mimeType=m,e.checkSupport(d),this._worker=f.pipe(new r(d)),f.lock()}catch(b){this._worker=new i("error"),this._worker.error(b)}}o.prototype={accumulate:function(f){return w(this,f)},on:function(f,s){var m=this;return f==="data"?this._worker.on(f,function(d){s.call(m,d.data,d.meta)}):this._worker.on(f,function(){e.delay(s,arguments,m)}),this},resume:function(){return e.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(f){if(e.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new p(this,{objectMode:this._outputType!=="nodebuffer"},f)}},u.exports=o},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(c,u,a){"use strict";if(a.base64=!0,a.array=!0,a.string=!0,a.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",a.nodebuffer=typeof Buffer<"u",a.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")a.blob=!1;else{var e=new ArrayBuffer(0);try{a.blob=new Blob([e],{type:"application/zip"}).size===0}catch{try{var r=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);r.append(e),a.blob=r.getBlob("application/zip").size===0}catch{a.blob=!1}}}try{a.nodestream=!!c("readable-stream").Readable}catch{a.nodestream=!1}},{"readable-stream":16}],31:[function(c,u,a){"use strict";for(var e=c("./utils"),r=c("./support"),i=c("./nodejsUtils"),l=c("./stream/GenericWorker"),_=new Array(256),y=0;y<256;y++)_[y]=252<=y?6:248<=y?5:240<=y?4:224<=y?3:192<=y?2:1;_[254]=_[254]=1;function p(){l.call(this,"utf-8 decode"),this.leftOver=null}function w(){l.call(this,"utf-8 encode")}a.utf8encode=function(o){return r.nodebuffer?i.newBufferFrom(o,"utf-8"):function(f){var s,m,d,b,k,S=f.length,E=0;for(b=0;b<S;b++)(64512&(m=f.charCodeAt(b)))==55296&&b+1<S&&(64512&(d=f.charCodeAt(b+1)))==56320&&(m=65536+(m-55296<<10)+(d-56320),b++),E+=m<128?1:m<2048?2:m<65536?3:4;for(s=r.uint8array?new Uint8Array(E):new Array(E),b=k=0;k<E;b++)(64512&(m=f.charCodeAt(b)))==55296&&b+1<S&&(64512&(d=f.charCodeAt(b+1)))==56320&&(m=65536+(m-55296<<10)+(d-56320),b++),m<128?s[k++]=m:(m<2048?s[k++]=192|m>>>6:(m<65536?s[k++]=224|m>>>12:(s[k++]=240|m>>>18,s[k++]=128|m>>>12&63),s[k++]=128|m>>>6&63),s[k++]=128|63&m);return s}(o)},a.utf8decode=function(o){return r.nodebuffer?e.transformTo("nodebuffer",o).toString("utf-8"):function(f){var s,m,d,b,k=f.length,S=new Array(2*k);for(s=m=0;s<k;)if((d=f[s++])<128)S[m++]=d;else if(4<(b=_[d]))S[m++]=65533,s+=b-1;else{for(d&=b===2?31:b===3?15:7;1<b&&s<k;)d=d<<6|63&f[s++],b--;1<b?S[m++]=65533:d<65536?S[m++]=d:(d-=65536,S[m++]=55296|d>>10&1023,S[m++]=56320|1023&d)}return S.length!==m&&(S.subarray?S=S.subarray(0,m):S.length=m),e.applyFromCharCode(S)}(o=e.transformTo(r.uint8array?"uint8array":"array",o))},e.inherits(p,l),p.prototype.processChunk=function(o){var f=e.transformTo(r.uint8array?"uint8array":"array",o.data);if(this.leftOver&&this.leftOver.length){if(r.uint8array){var s=f;(f=new Uint8Array(s.length+this.leftOver.length)).set(this.leftOver,0),f.set(s,this.leftOver.length)}else f=this.leftOver.concat(f);this.leftOver=null}var m=function(b,k){var S;for((k=k||b.length)>b.length&&(k=b.length),S=k-1;0<=S&&(192&b[S])==128;)S--;return S<0||S===0?k:S+_[b[S]]>k?S:k}(f),d=f;m!==f.length&&(r.uint8array?(d=f.subarray(0,m),this.leftOver=f.subarray(m,f.length)):(d=f.slice(0,m),this.leftOver=f.slice(m,f.length))),this.push({data:a.utf8decode(d),meta:o.meta})},p.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:a.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},a.Utf8DecodeWorker=p,e.inherits(w,l),w.prototype.processChunk=function(o){this.push({data:a.utf8encode(o.data),meta:o.meta})},a.Utf8EncodeWorker=w},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(c,u,a){"use strict";var e=c("./support"),r=c("./base64"),i=c("./nodejsUtils"),l=c("./external");function _(s){return s}function y(s,m){for(var d=0;d<s.length;++d)m[d]=255&s.charCodeAt(d);return m}c("setimmediate"),a.newBlob=function(s,m){a.checkSupport("blob");try{return new Blob([s],{type:m})}catch{try{var d=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return d.append(s),d.getBlob(m)}catch{throw new Error("Bug : can't construct the Blob.")}}};var p={stringifyByChunk:function(s,m,d){var b=[],k=0,S=s.length;if(S<=d)return String.fromCharCode.apply(null,s);for(;k<S;)m==="array"||m==="nodebuffer"?b.push(String.fromCharCode.apply(null,s.slice(k,Math.min(k+d,S)))):b.push(String.fromCharCode.apply(null,s.subarray(k,Math.min(k+d,S)))),k+=d;return b.join("")},stringifyByChar:function(s){for(var m="",d=0;d<s.length;d++)m+=String.fromCharCode(s[d]);return m},applyCanBeUsed:{uint8array:function(){try{return e.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return e.nodebuffer&&String.fromCharCode.apply(null,i.allocBuffer(1)).length===1}catch{return!1}}()}};function w(s){var m=65536,d=a.getTypeOf(s),b=!0;if(d==="uint8array"?b=p.applyCanBeUsed.uint8array:d==="nodebuffer"&&(b=p.applyCanBeUsed.nodebuffer),b)for(;1<m;)try{return p.stringifyByChunk(s,d,m)}catch{m=Math.floor(m/2)}return p.stringifyByChar(s)}function o(s,m){for(var d=0;d<s.length;d++)m[d]=s[d];return m}a.applyFromCharCode=w;var f={};f.string={string:_,array:function(s){return y(s,new Array(s.length))},arraybuffer:function(s){return f.string.uint8array(s).buffer},uint8array:function(s){return y(s,new Uint8Array(s.length))},nodebuffer:function(s){return y(s,i.allocBuffer(s.length))}},f.array={string:w,array:_,arraybuffer:function(s){return new Uint8Array(s).buffer},uint8array:function(s){return new Uint8Array(s)},nodebuffer:function(s){return i.newBufferFrom(s)}},f.arraybuffer={string:function(s){return w(new Uint8Array(s))},array:function(s){return o(new Uint8Array(s),new Array(s.byteLength))},arraybuffer:_,uint8array:function(s){return new Uint8Array(s)},nodebuffer:function(s){return i.newBufferFrom(new Uint8Array(s))}},f.uint8array={string:w,array:function(s){return o(s,new Array(s.length))},arraybuffer:function(s){return s.buffer},uint8array:_,nodebuffer:function(s){return i.newBufferFrom(s)}},f.nodebuffer={string:w,array:function(s){return o(s,new Array(s.length))},arraybuffer:function(s){return f.nodebuffer.uint8array(s).buffer},uint8array:function(s){return o(s,new Uint8Array(s.length))},nodebuffer:_},a.transformTo=function(s,m){if(m=m||"",!s)return m;a.checkSupport(s);var d=a.getTypeOf(m);return f[d][s](m)},a.resolve=function(s){for(var m=s.split("/"),d=[],b=0;b<m.length;b++){var k=m[b];k==="."||k===""&&b!==0&&b!==m.length-1||(k===".."?d.pop():d.push(k))}return d.join("/")},a.getTypeOf=function(s){return typeof s=="string"?"string":Object.prototype.toString.call(s)==="[object Array]"?"array":e.nodebuffer&&i.isBuffer(s)?"nodebuffer":e.uint8array&&s instanceof Uint8Array?"uint8array":e.arraybuffer&&s instanceof ArrayBuffer?"arraybuffer":void 0},a.checkSupport=function(s){if(!e[s.toLowerCase()])throw new Error(s+" is not supported by this platform")},a.MAX_VALUE_16BITS=65535,a.MAX_VALUE_32BITS=-1,a.pretty=function(s){var m,d,b="";for(d=0;d<(s||"").length;d++)b+="\\x"+((m=s.charCodeAt(d))<16?"0":"")+m.toString(16).toUpperCase();return b},a.delay=function(s,m,d){setImmediate(function(){s.apply(d||null,m||[])})},a.inherits=function(s,m){function d(){}d.prototype=m.prototype,s.prototype=new d},a.extend=function(){var s,m,d={};for(s=0;s<arguments.length;s++)for(m in arguments[s])Object.prototype.hasOwnProperty.call(arguments[s],m)&&d[m]===void 0&&(d[m]=arguments[s][m]);return d},a.prepareContent=function(s,m,d,b,k){return l.Promise.resolve(m).then(function(S){return e.blob&&(S instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(S))!==-1)&&typeof FileReader<"u"?new l.Promise(function(E,D){var O=new FileReader;O.onload=function(N){E(N.target.result)},O.onerror=function(N){D(N.target.error)},O.readAsArrayBuffer(S)}):S}).then(function(S){var E=a.getTypeOf(S);return E?(E==="arraybuffer"?S=a.transformTo("uint8array",S):E==="string"&&(k?S=r.decode(S):d&&b!==!0&&(S=function(D){return y(D,e.uint8array?new Uint8Array(D.length):new Array(D.length))}(S))),S):l.Promise.reject(new Error("Can't read the data of '"+s+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(c,u,a){"use strict";var e=c("./reader/readerFor"),r=c("./utils"),i=c("./signature"),l=c("./zipEntry"),_=c("./support");function y(p){this.files=[],this.loadOptions=p}y.prototype={checkSignature:function(p){if(!this.reader.readAndCheckSignature(p)){this.reader.index-=4;var w=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+r.pretty(w)+", expected "+r.pretty(p)+")")}},isSignature:function(p,w){var o=this.reader.index;this.reader.setIndex(p);var f=this.reader.readString(4)===w;return this.reader.setIndex(o),f},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var p=this.reader.readData(this.zipCommentLength),w=_.uint8array?"uint8array":"array",o=r.transformTo(w,p);this.zipComment=this.loadOptions.decodeFileName(o)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var p,w,o,f=this.zip64EndOfCentralSize-44;0<f;)p=this.reader.readInt(2),w=this.reader.readInt(4),o=this.reader.readData(w),this.zip64ExtensibleData[p]={id:p,length:w,value:o}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var p,w;for(p=0;p<this.files.length;p++)w=this.files[p],this.reader.setIndex(w.localHeaderOffset),this.checkSignature(i.LOCAL_FILE_HEADER),w.readLocalPart(this.reader),w.handleUTF8(),w.processAttributes()},readCentralDir:function(){var p;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(i.CENTRAL_FILE_HEADER);)(p=new l({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(p);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var p=this.reader.lastIndexOfSignature(i.CENTRAL_DIRECTORY_END);if(p<0)throw this.isSignature(0,i.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(p);var w=p;if(this.checkSignature(i.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===r.MAX_VALUE_16BITS||this.diskWithCentralDirStart===r.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===r.MAX_VALUE_16BITS||this.centralDirRecords===r.MAX_VALUE_16BITS||this.centralDirSize===r.MAX_VALUE_32BITS||this.centralDirOffset===r.MAX_VALUE_32BITS){if(this.zip64=!0,(p=this.reader.lastIndexOfSignature(i.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(p),this.checkSignature(i.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,i.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(i.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(i.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var o=this.centralDirOffset+this.centralDirSize;this.zip64&&(o+=20,o+=12+this.zip64EndOfCentralSize);var f=w-o;if(0<f)this.isSignature(w,i.CENTRAL_FILE_HEADER)||(this.reader.zero=f);else if(f<0)throw new Error("Corrupted zip: missing "+Math.abs(f)+" bytes.")},prepareReader:function(p){this.reader=e(p)},load:function(p){this.prepareReader(p),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},u.exports=y},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(c,u,a){"use strict";var e=c("./reader/readerFor"),r=c("./utils"),i=c("./compressedObject"),l=c("./crc32"),_=c("./utf8"),y=c("./compressions"),p=c("./support");function w(o,f){this.options=o,this.loadOptions=f}w.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(o){var f,s;if(o.skip(22),this.fileNameLength=o.readInt(2),s=o.readInt(2),this.fileName=o.readData(this.fileNameLength),o.skip(s),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((f=function(m){for(var d in y)if(Object.prototype.hasOwnProperty.call(y,d)&&y[d].magic===m)return y[d];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+r.pretty(this.compressionMethod)+" unknown (inner file : "+r.transformTo("string",this.fileName)+")");this.decompressed=new i(this.compressedSize,this.uncompressedSize,this.crc32,f,o.readData(this.compressedSize))},readCentralPart:function(o){this.versionMadeBy=o.readInt(2),o.skip(2),this.bitFlag=o.readInt(2),this.compressionMethod=o.readString(2),this.date=o.readDate(),this.crc32=o.readInt(4),this.compressedSize=o.readInt(4),this.uncompressedSize=o.readInt(4);var f=o.readInt(2);if(this.extraFieldsLength=o.readInt(2),this.fileCommentLength=o.readInt(2),this.diskNumberStart=o.readInt(2),this.internalFileAttributes=o.readInt(2),this.externalFileAttributes=o.readInt(4),this.localHeaderOffset=o.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");o.skip(f),this.readExtraFields(o),this.parseZIP64ExtraField(o),this.fileComment=o.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var o=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),o==0&&(this.dosPermissions=63&this.externalFileAttributes),o==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var o=e(this.extraFields[1].value);this.uncompressedSize===r.MAX_VALUE_32BITS&&(this.uncompressedSize=o.readInt(8)),this.compressedSize===r.MAX_VALUE_32BITS&&(this.compressedSize=o.readInt(8)),this.localHeaderOffset===r.MAX_VALUE_32BITS&&(this.localHeaderOffset=o.readInt(8)),this.diskNumberStart===r.MAX_VALUE_32BITS&&(this.diskNumberStart=o.readInt(4))}},readExtraFields:function(o){var f,s,m,d=o.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});o.index+4<d;)f=o.readInt(2),s=o.readInt(2),m=o.readData(s),this.extraFields[f]={id:f,length:s,value:m};o.setIndex(d)},handleUTF8:function(){var o=p.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=_.utf8decode(this.fileName),this.fileCommentStr=_.utf8decode(this.fileComment);else{var f=this.findExtraFieldUnicodePath();if(f!==null)this.fileNameStr=f;else{var s=r.transformTo(o,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(s)}var m=this.findExtraFieldUnicodeComment();if(m!==null)this.fileCommentStr=m;else{var d=r.transformTo(o,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(d)}}},findExtraFieldUnicodePath:function(){var o=this.extraFields[28789];if(o){var f=e(o.value);return f.readInt(1)!==1||l(this.fileName)!==f.readInt(4)?null:_.utf8decode(f.readData(o.length-5))}return null},findExtraFieldUnicodeComment:function(){var o=this.extraFields[25461];if(o){var f=e(o.value);return f.readInt(1)!==1||l(this.fileComment)!==f.readInt(4)?null:_.utf8decode(f.readData(o.length-5))}return null}},u.exports=w},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(c,u,a){"use strict";function e(f,s,m){this.name=f,this.dir=m.dir,this.date=m.date,this.comment=m.comment,this.unixPermissions=m.unixPermissions,this.dosPermissions=m.dosPermissions,this._data=s,this._dataBinary=m.binary,this.options={compression:m.compression,compressionOptions:m.compressionOptions}}var r=c("./stream/StreamHelper"),i=c("./stream/DataWorker"),l=c("./utf8"),_=c("./compressedObject"),y=c("./stream/GenericWorker");e.prototype={internalStream:function(f){var s=null,m="string";try{if(!f)throw new Error("No output type specified.");var d=(m=f.toLowerCase())==="string"||m==="text";m!=="binarystring"&&m!=="text"||(m="string"),s=this._decompressWorker();var b=!this._dataBinary;b&&!d&&(s=s.pipe(new l.Utf8EncodeWorker)),!b&&d&&(s=s.pipe(new l.Utf8DecodeWorker))}catch(k){(s=new y("error")).error(k)}return new r(s,m,"")},async:function(f,s){return this.internalStream(f).accumulate(s)},nodeStream:function(f,s){return this.internalStream(f||"nodebuffer").toNodejsStream(s)},_compressWorker:function(f,s){if(this._data instanceof _&&this._data.compression.magic===f.magic)return this._data.getCompressedWorker();var m=this._decompressWorker();return this._dataBinary||(m=m.pipe(new l.Utf8EncodeWorker)),_.createWorkerFrom(m,f,s)},_decompressWorker:function(){return this._data instanceof _?this._data.getContentWorker():this._data instanceof y?this._data:new i(this._data)}};for(var p=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],w=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},o=0;o<p.length;o++)e.prototype[p[o]]=w;u.exports=e},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(c,u,a){(function(e){"use strict";var r,i,l=e.MutationObserver||e.WebKitMutationObserver;if(l){var _=0,y=new l(f),p=e.document.createTextNode("");y.observe(p,{characterData:!0}),r=function(){p.data=_=++_%2}}else if(e.setImmediate||e.MessageChannel===void 0)r="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var s=e.document.createElement("script");s.onreadystatechange=function(){f(),s.onreadystatechange=null,s.parentNode.removeChild(s),s=null},e.document.documentElement.appendChild(s)}:function(){setTimeout(f,0)};else{var w=new e.MessageChannel;w.port1.onmessage=f,r=function(){w.port2.postMessage(0)}}var o=[];function f(){var s,m;i=!0;for(var d=o.length;d;){for(m=o,o=[],s=-1;++s<d;)m[s]();d=o.length}i=!1}u.exports=function(s){o.push(s)!==1||i||r()}}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(c,u,a){"use strict";var e=c("immediate");function r(){}var i={},l=["REJECTED"],_=["FULFILLED"],y=["PENDING"];function p(d){if(typeof d!="function")throw new TypeError("resolver must be a function");this.state=y,this.queue=[],this.outcome=void 0,d!==r&&s(this,d)}function w(d,b,k){this.promise=d,typeof b=="function"&&(this.onFulfilled=b,this.callFulfilled=this.otherCallFulfilled),typeof k=="function"&&(this.onRejected=k,this.callRejected=this.otherCallRejected)}function o(d,b,k){e(function(){var S;try{S=b(k)}catch(E){return i.reject(d,E)}S===d?i.reject(d,new TypeError("Cannot resolve promise with itself")):i.resolve(d,S)})}function f(d){var b=d&&d.then;if(d&&(typeof d=="object"||typeof d=="function")&&typeof b=="function")return function(){b.apply(d,arguments)}}function s(d,b){var k=!1;function S(O){k||(k=!0,i.reject(d,O))}function E(O){k||(k=!0,i.resolve(d,O))}var D=m(function(){b(E,S)});D.status==="error"&&S(D.value)}function m(d,b){var k={};try{k.value=d(b),k.status="success"}catch(S){k.status="error",k.value=S}return k}(u.exports=p).prototype.finally=function(d){if(typeof d!="function")return this;var b=this.constructor;return this.then(function(k){return b.resolve(d()).then(function(){return k})},function(k){return b.resolve(d()).then(function(){throw k})})},p.prototype.catch=function(d){return this.then(null,d)},p.prototype.then=function(d,b){if(typeof d!="function"&&this.state===_||typeof b!="function"&&this.state===l)return this;var k=new this.constructor(r);return this.state!==y?o(k,this.state===_?d:b,this.outcome):this.queue.push(new w(k,d,b)),k},w.prototype.callFulfilled=function(d){i.resolve(this.promise,d)},w.prototype.otherCallFulfilled=function(d){o(this.promise,this.onFulfilled,d)},w.prototype.callRejected=function(d){i.reject(this.promise,d)},w.prototype.otherCallRejected=function(d){o(this.promise,this.onRejected,d)},i.resolve=function(d,b){var k=m(f,b);if(k.status==="error")return i.reject(d,k.value);var S=k.value;if(S)s(d,S);else{d.state=_,d.outcome=b;for(var E=-1,D=d.queue.length;++E<D;)d.queue[E].callFulfilled(b)}return d},i.reject=function(d,b){d.state=l,d.outcome=b;for(var k=-1,S=d.queue.length;++k<S;)d.queue[k].callRejected(b);return d},p.resolve=function(d){return d instanceof this?d:i.resolve(new this(r),d)},p.reject=function(d){var b=new this(r);return i.reject(b,d)},p.all=function(d){var b=this;if(Object.prototype.toString.call(d)!=="[object Array]")return this.reject(new TypeError("must be an array"));var k=d.length,S=!1;if(!k)return this.resolve([]);for(var E=new Array(k),D=0,O=-1,N=new this(r);++O<k;)T(d[O],O);return N;function T(W,X){b.resolve(W).then(function(v){E[X]=v,++D!==k||S||(S=!0,i.resolve(N,E))},function(v){S||(S=!0,i.reject(N,v))})}},p.race=function(d){var b=this;if(Object.prototype.toString.call(d)!=="[object Array]")return this.reject(new TypeError("must be an array"));var k=d.length,S=!1;if(!k)return this.resolve([]);for(var E=-1,D=new this(r);++E<k;)O=d[E],b.resolve(O).then(function(N){S||(S=!0,i.resolve(D,N))},function(N){S||(S=!0,i.reject(D,N))});var O;return D}},{immediate:36}],38:[function(c,u,a){"use strict";var e={};(0,c("./lib/utils/common").assign)(e,c("./lib/deflate"),c("./lib/inflate"),c("./lib/zlib/constants")),u.exports=e},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(c,u,a){"use strict";var e=c("./zlib/deflate"),r=c("./utils/common"),i=c("./utils/strings"),l=c("./zlib/messages"),_=c("./zlib/zstream"),y=Object.prototype.toString,p=0,w=-1,o=0,f=8;function s(d){if(!(this instanceof s))return new s(d);this.options=r.assign({level:w,method:f,chunkSize:16384,windowBits:15,memLevel:8,strategy:o,to:""},d||{});var b=this.options;b.raw&&0<b.windowBits?b.windowBits=-b.windowBits:b.gzip&&0<b.windowBits&&b.windowBits<16&&(b.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new _,this.strm.avail_out=0;var k=e.deflateInit2(this.strm,b.level,b.method,b.windowBits,b.memLevel,b.strategy);if(k!==p)throw new Error(l[k]);if(b.header&&e.deflateSetHeader(this.strm,b.header),b.dictionary){var S;if(S=typeof b.dictionary=="string"?i.string2buf(b.dictionary):y.call(b.dictionary)==="[object ArrayBuffer]"?new Uint8Array(b.dictionary):b.dictionary,(k=e.deflateSetDictionary(this.strm,S))!==p)throw new Error(l[k]);this._dict_set=!0}}function m(d,b){var k=new s(b);if(k.push(d,!0),k.err)throw k.msg||l[k.err];return k.result}s.prototype.push=function(d,b){var k,S,E=this.strm,D=this.options.chunkSize;if(this.ended)return!1;S=b===~~b?b:b===!0?4:0,typeof d=="string"?E.input=i.string2buf(d):y.call(d)==="[object ArrayBuffer]"?E.input=new Uint8Array(d):E.input=d,E.next_in=0,E.avail_in=E.input.length;do{if(E.avail_out===0&&(E.output=new r.Buf8(D),E.next_out=0,E.avail_out=D),(k=e.deflate(E,S))!==1&&k!==p)return this.onEnd(k),!(this.ended=!0);E.avail_out!==0&&(E.avail_in!==0||S!==4&&S!==2)||(this.options.to==="string"?this.onData(i.buf2binstring(r.shrinkBuf(E.output,E.next_out))):this.onData(r.shrinkBuf(E.output,E.next_out)))}while((0<E.avail_in||E.avail_out===0)&&k!==1);return S===4?(k=e.deflateEnd(this.strm),this.onEnd(k),this.ended=!0,k===p):S!==2||(this.onEnd(p),!(E.avail_out=0))},s.prototype.onData=function(d){this.chunks.push(d)},s.prototype.onEnd=function(d){d===p&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=r.flattenChunks(this.chunks)),this.chunks=[],this.err=d,this.msg=this.strm.msg},a.Deflate=s,a.deflate=m,a.deflateRaw=function(d,b){return(b=b||{}).raw=!0,m(d,b)},a.gzip=function(d,b){return(b=b||{}).gzip=!0,m(d,b)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(c,u,a){"use strict";var e=c("./zlib/inflate"),r=c("./utils/common"),i=c("./utils/strings"),l=c("./zlib/constants"),_=c("./zlib/messages"),y=c("./zlib/zstream"),p=c("./zlib/gzheader"),w=Object.prototype.toString;function o(s){if(!(this instanceof o))return new o(s);this.options=r.assign({chunkSize:16384,windowBits:0,to:""},s||{});var m=this.options;m.raw&&0<=m.windowBits&&m.windowBits<16&&(m.windowBits=-m.windowBits,m.windowBits===0&&(m.windowBits=-15)),!(0<=m.windowBits&&m.windowBits<16)||s&&s.windowBits||(m.windowBits+=32),15<m.windowBits&&m.windowBits<48&&!(15&m.windowBits)&&(m.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new y,this.strm.avail_out=0;var d=e.inflateInit2(this.strm,m.windowBits);if(d!==l.Z_OK)throw new Error(_[d]);this.header=new p,e.inflateGetHeader(this.strm,this.header)}function f(s,m){var d=new o(m);if(d.push(s,!0),d.err)throw d.msg||_[d.err];return d.result}o.prototype.push=function(s,m){var d,b,k,S,E,D,O=this.strm,N=this.options.chunkSize,T=this.options.dictionary,W=!1;if(this.ended)return!1;b=m===~~m?m:m===!0?l.Z_FINISH:l.Z_NO_FLUSH,typeof s=="string"?O.input=i.binstring2buf(s):w.call(s)==="[object ArrayBuffer]"?O.input=new Uint8Array(s):O.input=s,O.next_in=0,O.avail_in=O.input.length;do{if(O.avail_out===0&&(O.output=new r.Buf8(N),O.next_out=0,O.avail_out=N),(d=e.inflate(O,l.Z_NO_FLUSH))===l.Z_NEED_DICT&&T&&(D=typeof T=="string"?i.string2buf(T):w.call(T)==="[object ArrayBuffer]"?new Uint8Array(T):T,d=e.inflateSetDictionary(this.strm,D)),d===l.Z_BUF_ERROR&&W===!0&&(d=l.Z_OK,W=!1),d!==l.Z_STREAM_END&&d!==l.Z_OK)return this.onEnd(d),!(this.ended=!0);O.next_out&&(O.avail_out!==0&&d!==l.Z_STREAM_END&&(O.avail_in!==0||b!==l.Z_FINISH&&b!==l.Z_SYNC_FLUSH)||(this.options.to==="string"?(k=i.utf8border(O.output,O.next_out),S=O.next_out-k,E=i.buf2string(O.output,k),O.next_out=S,O.avail_out=N-S,S&&r.arraySet(O.output,O.output,k,S,0),this.onData(E)):this.onData(r.shrinkBuf(O.output,O.next_out)))),O.avail_in===0&&O.avail_out===0&&(W=!0)}while((0<O.avail_in||O.avail_out===0)&&d!==l.Z_STREAM_END);return d===l.Z_STREAM_END&&(b=l.Z_FINISH),b===l.Z_FINISH?(d=e.inflateEnd(this.strm),this.onEnd(d),this.ended=!0,d===l.Z_OK):b!==l.Z_SYNC_FLUSH||(this.onEnd(l.Z_OK),!(O.avail_out=0))},o.prototype.onData=function(s){this.chunks.push(s)},o.prototype.onEnd=function(s){s===l.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=r.flattenChunks(this.chunks)),this.chunks=[],this.err=s,this.msg=this.strm.msg},a.Inflate=o,a.inflate=f,a.inflateRaw=function(s,m){return(m=m||{}).raw=!0,f(s,m)},a.ungzip=f},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(c,u,a){"use strict";var e=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";a.assign=function(l){for(var _=Array.prototype.slice.call(arguments,1);_.length;){var y=_.shift();if(y){if(typeof y!="object")throw new TypeError(y+"must be non-object");for(var p in y)y.hasOwnProperty(p)&&(l[p]=y[p])}}return l},a.shrinkBuf=function(l,_){return l.length===_?l:l.subarray?l.subarray(0,_):(l.length=_,l)};var r={arraySet:function(l,_,y,p,w){if(_.subarray&&l.subarray)l.set(_.subarray(y,y+p),w);else for(var o=0;o<p;o++)l[w+o]=_[y+o]},flattenChunks:function(l){var _,y,p,w,o,f;for(_=p=0,y=l.length;_<y;_++)p+=l[_].length;for(f=new Uint8Array(p),_=w=0,y=l.length;_<y;_++)o=l[_],f.set(o,w),w+=o.length;return f}},i={arraySet:function(l,_,y,p,w){for(var o=0;o<p;o++)l[w+o]=_[y+o]},flattenChunks:function(l){return[].concat.apply([],l)}};a.setTyped=function(l){l?(a.Buf8=Uint8Array,a.Buf16=Uint16Array,a.Buf32=Int32Array,a.assign(a,r)):(a.Buf8=Array,a.Buf16=Array,a.Buf32=Array,a.assign(a,i))},a.setTyped(e)},{}],42:[function(c,u,a){"use strict";var e=c("./common"),r=!0,i=!0;try{String.fromCharCode.apply(null,[0])}catch{r=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{i=!1}for(var l=new e.Buf8(256),_=0;_<256;_++)l[_]=252<=_?6:248<=_?5:240<=_?4:224<=_?3:192<=_?2:1;function y(p,w){if(w<65537&&(p.subarray&&i||!p.subarray&&r))return String.fromCharCode.apply(null,e.shrinkBuf(p,w));for(var o="",f=0;f<w;f++)o+=String.fromCharCode(p[f]);return o}l[254]=l[254]=1,a.string2buf=function(p){var w,o,f,s,m,d=p.length,b=0;for(s=0;s<d;s++)(64512&(o=p.charCodeAt(s)))==55296&&s+1<d&&(64512&(f=p.charCodeAt(s+1)))==56320&&(o=65536+(o-55296<<10)+(f-56320),s++),b+=o<128?1:o<2048?2:o<65536?3:4;for(w=new e.Buf8(b),s=m=0;m<b;s++)(64512&(o=p.charCodeAt(s)))==55296&&s+1<d&&(64512&(f=p.charCodeAt(s+1)))==56320&&(o=65536+(o-55296<<10)+(f-56320),s++),o<128?w[m++]=o:(o<2048?w[m++]=192|o>>>6:(o<65536?w[m++]=224|o>>>12:(w[m++]=240|o>>>18,w[m++]=128|o>>>12&63),w[m++]=128|o>>>6&63),w[m++]=128|63&o);return w},a.buf2binstring=function(p){return y(p,p.length)},a.binstring2buf=function(p){for(var w=new e.Buf8(p.length),o=0,f=w.length;o<f;o++)w[o]=p.charCodeAt(o);return w},a.buf2string=function(p,w){var o,f,s,m,d=w||p.length,b=new Array(2*d);for(o=f=0;o<d;)if((s=p[o++])<128)b[f++]=s;else if(4<(m=l[s]))b[f++]=65533,o+=m-1;else{for(s&=m===2?31:m===3?15:7;1<m&&o<d;)s=s<<6|63&p[o++],m--;1<m?b[f++]=65533:s<65536?b[f++]=s:(s-=65536,b[f++]=55296|s>>10&1023,b[f++]=56320|1023&s)}return y(b,f)},a.utf8border=function(p,w){var o;for((w=w||p.length)>p.length&&(w=p.length),o=w-1;0<=o&&(192&p[o])==128;)o--;return o<0||o===0?w:o+l[p[o]]>w?o:w}},{"./common":41}],43:[function(c,u,a){"use strict";u.exports=function(e,r,i,l){for(var _=65535&e|0,y=e>>>16&65535|0,p=0;i!==0;){for(i-=p=2e3<i?2e3:i;y=y+(_=_+r[l++]|0)|0,--p;);_%=65521,y%=65521}return _|y<<16|0}},{}],44:[function(c,u,a){"use strict";u.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(c,u,a){"use strict";var e=function(){for(var r,i=[],l=0;l<256;l++){r=l;for(var _=0;_<8;_++)r=1&r?3988292384^r>>>1:r>>>1;i[l]=r}return i}();u.exports=function(r,i,l,_){var y=e,p=_+l;r^=-1;for(var w=_;w<p;w++)r=r>>>8^y[255&(r^i[w])];return-1^r}},{}],46:[function(c,u,a){"use strict";var e,r=c("../utils/common"),i=c("./trees"),l=c("./adler32"),_=c("./crc32"),y=c("./messages"),p=0,w=4,o=0,f=-2,s=-1,m=4,d=2,b=8,k=9,S=286,E=30,D=19,O=2*S+1,N=15,T=3,W=258,X=W+T+1,v=42,L=113,n=1,B=2,V=3,M=4;function J(t,F){return t.msg=y[F],F}function U(t){return(t<<1)-(4<t?9:0)}function Y(t){for(var F=t.length;0<=--F;)t[F]=0}function A(t){var F=t.state,z=F.pending;z>t.avail_out&&(z=t.avail_out),z!==0&&(r.arraySet(t.output,F.pending_buf,F.pending_out,z,t.next_out),t.next_out+=z,F.pending_out+=z,t.total_out+=z,t.avail_out-=z,F.pending-=z,F.pending===0&&(F.pending_out=0))}function C(t,F){i._tr_flush_block(t,0<=t.block_start?t.block_start:-1,t.strstart-t.block_start,F),t.block_start=t.strstart,A(t.strm)}function K(t,F){t.pending_buf[t.pending++]=F}function $(t,F){t.pending_buf[t.pending++]=F>>>8&255,t.pending_buf[t.pending++]=255&F}function Z(t,F){var z,g,h=t.max_chain_length,x=t.strstart,R=t.prev_length,P=t.nice_match,I=t.strstart>t.w_size-X?t.strstart-(t.w_size-X):0,j=t.window,G=t.w_mask,H=t.prev,q=t.strstart+W,rt=j[x+R-1],tt=j[x+R];t.prev_length>=t.good_match&&(h>>=2),P>t.lookahead&&(P=t.lookahead);do if(j[(z=F)+R]===tt&&j[z+R-1]===rt&&j[z]===j[x]&&j[++z]===j[x+1]){x+=2,z++;do;while(j[++x]===j[++z]&&j[++x]===j[++z]&&j[++x]===j[++z]&&j[++x]===j[++z]&&j[++x]===j[++z]&&j[++x]===j[++z]&&j[++x]===j[++z]&&j[++x]===j[++z]&&x<q);if(g=W-(q-x),x=q-W,R<g){if(t.match_start=F,P<=(R=g))break;rt=j[x+R-1],tt=j[x+R]}}while((F=H[F&G])>I&&--h!=0);return R<=t.lookahead?R:t.lookahead}function nt(t){var F,z,g,h,x,R,P,I,j,G,H=t.w_size;do{if(h=t.window_size-t.lookahead-t.strstart,t.strstart>=H+(H-X)){for(r.arraySet(t.window,t.window,H,H,0),t.match_start-=H,t.strstart-=H,t.block_start-=H,F=z=t.hash_size;g=t.head[--F],t.head[F]=H<=g?g-H:0,--z;);for(F=z=H;g=t.prev[--F],t.prev[F]=H<=g?g-H:0,--z;);h+=H}if(t.strm.avail_in===0)break;if(R=t.strm,P=t.window,I=t.strstart+t.lookahead,j=h,G=void 0,G=R.avail_in,j<G&&(G=j),z=G===0?0:(R.avail_in-=G,r.arraySet(P,R.input,R.next_in,G,I),R.state.wrap===1?R.adler=l(R.adler,P,G,I):R.state.wrap===2&&(R.adler=_(R.adler,P,G,I)),R.next_in+=G,R.total_in+=G,G),t.lookahead+=z,t.lookahead+t.insert>=T)for(x=t.strstart-t.insert,t.ins_h=t.window[x],t.ins_h=(t.ins_h<<t.hash_shift^t.window[x+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[x+T-1])&t.hash_mask,t.prev[x&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=x,x++,t.insert--,!(t.lookahead+t.insert<T)););}while(t.lookahead<X&&t.strm.avail_in!==0)}function ot(t,F){for(var z,g;;){if(t.lookahead<X){if(nt(t),t.lookahead<X&&F===p)return n;if(t.lookahead===0)break}if(z=0,t.lookahead>=T&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+T-1])&t.hash_mask,z=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),z!==0&&t.strstart-z<=t.w_size-X&&(t.match_length=Z(t,z)),t.match_length>=T)if(g=i._tr_tally(t,t.strstart-t.match_start,t.match_length-T),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=T){for(t.match_length--;t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+T-1])&t.hash_mask,z=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart,--t.match_length!=0;);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else g=i._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(g&&(C(t,!1),t.strm.avail_out===0))return n}return t.insert=t.strstart<T-1?t.strstart:T-1,F===w?(C(t,!0),t.strm.avail_out===0?V:M):t.last_lit&&(C(t,!1),t.strm.avail_out===0)?n:B}function Q(t,F){for(var z,g,h;;){if(t.lookahead<X){if(nt(t),t.lookahead<X&&F===p)return n;if(t.lookahead===0)break}if(z=0,t.lookahead>=T&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+T-1])&t.hash_mask,z=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=T-1,z!==0&&t.prev_length<t.max_lazy_match&&t.strstart-z<=t.w_size-X&&(t.match_length=Z(t,z),t.match_length<=5&&(t.strategy===1||t.match_length===T&&4096<t.strstart-t.match_start)&&(t.match_length=T-1)),t.prev_length>=T&&t.match_length<=t.prev_length){for(h=t.strstart+t.lookahead-T,g=i._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-T),t.lookahead-=t.prev_length-1,t.prev_length-=2;++t.strstart<=h&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+T-1])&t.hash_mask,z=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),--t.prev_length!=0;);if(t.match_available=0,t.match_length=T-1,t.strstart++,g&&(C(t,!1),t.strm.avail_out===0))return n}else if(t.match_available){if((g=i._tr_tally(t,0,t.window[t.strstart-1]))&&C(t,!1),t.strstart++,t.lookahead--,t.strm.avail_out===0)return n}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(g=i._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<T-1?t.strstart:T-1,F===w?(C(t,!0),t.strm.avail_out===0?V:M):t.last_lit&&(C(t,!1),t.strm.avail_out===0)?n:B}function et(t,F,z,g,h){this.good_length=t,this.max_lazy=F,this.nice_length=z,this.max_chain=g,this.func=h}function st(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=b,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new r.Buf16(2*O),this.dyn_dtree=new r.Buf16(2*(2*E+1)),this.bl_tree=new r.Buf16(2*(2*D+1)),Y(this.dyn_ltree),Y(this.dyn_dtree),Y(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new r.Buf16(N+1),this.heap=new r.Buf16(2*S+1),Y(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new r.Buf16(2*S+1),Y(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function it(t){var F;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=d,(F=t.state).pending=0,F.pending_out=0,F.wrap<0&&(F.wrap=-F.wrap),F.status=F.wrap?v:L,t.adler=F.wrap===2?0:1,F.last_flush=p,i._tr_init(F),o):J(t,f)}function ut(t){var F=it(t);return F===o&&function(z){z.window_size=2*z.w_size,Y(z.head),z.max_lazy_match=e[z.level].max_lazy,z.good_match=e[z.level].good_length,z.nice_match=e[z.level].nice_length,z.max_chain_length=e[z.level].max_chain,z.strstart=0,z.block_start=0,z.lookahead=0,z.insert=0,z.match_length=z.prev_length=T-1,z.match_available=0,z.ins_h=0}(t.state),F}function dt(t,F,z,g,h,x){if(!t)return f;var R=1;if(F===s&&(F=6),g<0?(R=0,g=-g):15<g&&(R=2,g-=16),h<1||k<h||z!==b||g<8||15<g||F<0||9<F||x<0||m<x)return J(t,f);g===8&&(g=9);var P=new st;return(t.state=P).strm=t,P.wrap=R,P.gzhead=null,P.w_bits=g,P.w_size=1<<P.w_bits,P.w_mask=P.w_size-1,P.hash_bits=h+7,P.hash_size=1<<P.hash_bits,P.hash_mask=P.hash_size-1,P.hash_shift=~~((P.hash_bits+T-1)/T),P.window=new r.Buf8(2*P.w_size),P.head=new r.Buf16(P.hash_size),P.prev=new r.Buf16(P.w_size),P.lit_bufsize=1<<h+6,P.pending_buf_size=4*P.lit_bufsize,P.pending_buf=new r.Buf8(P.pending_buf_size),P.d_buf=1*P.lit_bufsize,P.l_buf=3*P.lit_bufsize,P.level=F,P.strategy=x,P.method=z,ut(t)}e=[new et(0,0,0,0,function(t,F){var z=65535;for(z>t.pending_buf_size-5&&(z=t.pending_buf_size-5);;){if(t.lookahead<=1){if(nt(t),t.lookahead===0&&F===p)return n;if(t.lookahead===0)break}t.strstart+=t.lookahead,t.lookahead=0;var g=t.block_start+z;if((t.strstart===0||t.strstart>=g)&&(t.lookahead=t.strstart-g,t.strstart=g,C(t,!1),t.strm.avail_out===0)||t.strstart-t.block_start>=t.w_size-X&&(C(t,!1),t.strm.avail_out===0))return n}return t.insert=0,F===w?(C(t,!0),t.strm.avail_out===0?V:M):(t.strstart>t.block_start&&(C(t,!1),t.strm.avail_out),n)}),new et(4,4,8,4,ot),new et(4,5,16,8,ot),new et(4,6,32,32,ot),new et(4,4,16,16,Q),new et(8,16,32,32,Q),new et(8,16,128,128,Q),new et(8,32,128,256,Q),new et(32,128,258,1024,Q),new et(32,258,258,4096,Q)],a.deflateInit=function(t,F){return dt(t,F,b,15,8,0)},a.deflateInit2=dt,a.deflateReset=ut,a.deflateResetKeep=it,a.deflateSetHeader=function(t,F){return t&&t.state?t.state.wrap!==2?f:(t.state.gzhead=F,o):f},a.deflate=function(t,F){var z,g,h,x;if(!t||!t.state||5<F||F<0)return t?J(t,f):f;if(g=t.state,!t.output||!t.input&&t.avail_in!==0||g.status===666&&F!==w)return J(t,t.avail_out===0?-5:f);if(g.strm=t,z=g.last_flush,g.last_flush=F,g.status===v)if(g.wrap===2)t.adler=0,K(g,31),K(g,139),K(g,8),g.gzhead?(K(g,(g.gzhead.text?1:0)+(g.gzhead.hcrc?2:0)+(g.gzhead.extra?4:0)+(g.gzhead.name?8:0)+(g.gzhead.comment?16:0)),K(g,255&g.gzhead.time),K(g,g.gzhead.time>>8&255),K(g,g.gzhead.time>>16&255),K(g,g.gzhead.time>>24&255),K(g,g.level===9?2:2<=g.strategy||g.level<2?4:0),K(g,255&g.gzhead.os),g.gzhead.extra&&g.gzhead.extra.length&&(K(g,255&g.gzhead.extra.length),K(g,g.gzhead.extra.length>>8&255)),g.gzhead.hcrc&&(t.adler=_(t.adler,g.pending_buf,g.pending,0)),g.gzindex=0,g.status=69):(K(g,0),K(g,0),K(g,0),K(g,0),K(g,0),K(g,g.level===9?2:2<=g.strategy||g.level<2?4:0),K(g,3),g.status=L);else{var R=b+(g.w_bits-8<<4)<<8;R|=(2<=g.strategy||g.level<2?0:g.level<6?1:g.level===6?2:3)<<6,g.strstart!==0&&(R|=32),R+=31-R%31,g.status=L,$(g,R),g.strstart!==0&&($(g,t.adler>>>16),$(g,65535&t.adler)),t.adler=1}if(g.status===69)if(g.gzhead.extra){for(h=g.pending;g.gzindex<(65535&g.gzhead.extra.length)&&(g.pending!==g.pending_buf_size||(g.gzhead.hcrc&&g.pending>h&&(t.adler=_(t.adler,g.pending_buf,g.pending-h,h)),A(t),h=g.pending,g.pending!==g.pending_buf_size));)K(g,255&g.gzhead.extra[g.gzindex]),g.gzindex++;g.gzhead.hcrc&&g.pending>h&&(t.adler=_(t.adler,g.pending_buf,g.pending-h,h)),g.gzindex===g.gzhead.extra.length&&(g.gzindex=0,g.status=73)}else g.status=73;if(g.status===73)if(g.gzhead.name){h=g.pending;do{if(g.pending===g.pending_buf_size&&(g.gzhead.hcrc&&g.pending>h&&(t.adler=_(t.adler,g.pending_buf,g.pending-h,h)),A(t),h=g.pending,g.pending===g.pending_buf_size)){x=1;break}x=g.gzindex<g.gzhead.name.length?255&g.gzhead.name.charCodeAt(g.gzindex++):0,K(g,x)}while(x!==0);g.gzhead.hcrc&&g.pending>h&&(t.adler=_(t.adler,g.pending_buf,g.pending-h,h)),x===0&&(g.gzindex=0,g.status=91)}else g.status=91;if(g.status===91)if(g.gzhead.comment){h=g.pending;do{if(g.pending===g.pending_buf_size&&(g.gzhead.hcrc&&g.pending>h&&(t.adler=_(t.adler,g.pending_buf,g.pending-h,h)),A(t),h=g.pending,g.pending===g.pending_buf_size)){x=1;break}x=g.gzindex<g.gzhead.comment.length?255&g.gzhead.comment.charCodeAt(g.gzindex++):0,K(g,x)}while(x!==0);g.gzhead.hcrc&&g.pending>h&&(t.adler=_(t.adler,g.pending_buf,g.pending-h,h)),x===0&&(g.status=103)}else g.status=103;if(g.status===103&&(g.gzhead.hcrc?(g.pending+2>g.pending_buf_size&&A(t),g.pending+2<=g.pending_buf_size&&(K(g,255&t.adler),K(g,t.adler>>8&255),t.adler=0,g.status=L)):g.status=L),g.pending!==0){if(A(t),t.avail_out===0)return g.last_flush=-1,o}else if(t.avail_in===0&&U(F)<=U(z)&&F!==w)return J(t,-5);if(g.status===666&&t.avail_in!==0)return J(t,-5);if(t.avail_in!==0||g.lookahead!==0||F!==p&&g.status!==666){var P=g.strategy===2?function(I,j){for(var G;;){if(I.lookahead===0&&(nt(I),I.lookahead===0)){if(j===p)return n;break}if(I.match_length=0,G=i._tr_tally(I,0,I.window[I.strstart]),I.lookahead--,I.strstart++,G&&(C(I,!1),I.strm.avail_out===0))return n}return I.insert=0,j===w?(C(I,!0),I.strm.avail_out===0?V:M):I.last_lit&&(C(I,!1),I.strm.avail_out===0)?n:B}(g,F):g.strategy===3?function(I,j){for(var G,H,q,rt,tt=I.window;;){if(I.lookahead<=W){if(nt(I),I.lookahead<=W&&j===p)return n;if(I.lookahead===0)break}if(I.match_length=0,I.lookahead>=T&&0<I.strstart&&(H=tt[q=I.strstart-1])===tt[++q]&&H===tt[++q]&&H===tt[++q]){rt=I.strstart+W;do;while(H===tt[++q]&&H===tt[++q]&&H===tt[++q]&&H===tt[++q]&&H===tt[++q]&&H===tt[++q]&&H===tt[++q]&&H===tt[++q]&&q<rt);I.match_length=W-(rt-q),I.match_length>I.lookahead&&(I.match_length=I.lookahead)}if(I.match_length>=T?(G=i._tr_tally(I,1,I.match_length-T),I.lookahead-=I.match_length,I.strstart+=I.match_length,I.match_length=0):(G=i._tr_tally(I,0,I.window[I.strstart]),I.lookahead--,I.strstart++),G&&(C(I,!1),I.strm.avail_out===0))return n}return I.insert=0,j===w?(C(I,!0),I.strm.avail_out===0?V:M):I.last_lit&&(C(I,!1),I.strm.avail_out===0)?n:B}(g,F):e[g.level].func(g,F);if(P!==V&&P!==M||(g.status=666),P===n||P===V)return t.avail_out===0&&(g.last_flush=-1),o;if(P===B&&(F===1?i._tr_align(g):F!==5&&(i._tr_stored_block(g,0,0,!1),F===3&&(Y(g.head),g.lookahead===0&&(g.strstart=0,g.block_start=0,g.insert=0))),A(t),t.avail_out===0))return g.last_flush=-1,o}return F!==w?o:g.wrap<=0?1:(g.wrap===2?(K(g,255&t.adler),K(g,t.adler>>8&255),K(g,t.adler>>16&255),K(g,t.adler>>24&255),K(g,255&t.total_in),K(g,t.total_in>>8&255),K(g,t.total_in>>16&255),K(g,t.total_in>>24&255)):($(g,t.adler>>>16),$(g,65535&t.adler)),A(t),0<g.wrap&&(g.wrap=-g.wrap),g.pending!==0?o:1)},a.deflateEnd=function(t){var F;return t&&t.state?(F=t.state.status)!==v&&F!==69&&F!==73&&F!==91&&F!==103&&F!==L&&F!==666?J(t,f):(t.state=null,F===L?J(t,-3):o):f},a.deflateSetDictionary=function(t,F){var z,g,h,x,R,P,I,j,G=F.length;if(!t||!t.state||(x=(z=t.state).wrap)===2||x===1&&z.status!==v||z.lookahead)return f;for(x===1&&(t.adler=l(t.adler,F,G,0)),z.wrap=0,G>=z.w_size&&(x===0&&(Y(z.head),z.strstart=0,z.block_start=0,z.insert=0),j=new r.Buf8(z.w_size),r.arraySet(j,F,G-z.w_size,z.w_size,0),F=j,G=z.w_size),R=t.avail_in,P=t.next_in,I=t.input,t.avail_in=G,t.next_in=0,t.input=F,nt(z);z.lookahead>=T;){for(g=z.strstart,h=z.lookahead-(T-1);z.ins_h=(z.ins_h<<z.hash_shift^z.window[g+T-1])&z.hash_mask,z.prev[g&z.w_mask]=z.head[z.ins_h],z.head[z.ins_h]=g,g++,--h;);z.strstart=g,z.lookahead=T-1,nt(z)}return z.strstart+=z.lookahead,z.block_start=z.strstart,z.insert=z.lookahead,z.lookahead=0,z.match_length=z.prev_length=T-1,z.match_available=0,t.next_in=P,t.input=I,t.avail_in=R,z.wrap=x,o},a.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(c,u,a){"use strict";u.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(c,u,a){"use strict";u.exports=function(e,r){var i,l,_,y,p,w,o,f,s,m,d,b,k,S,E,D,O,N,T,W,X,v,L,n,B;i=e.state,l=e.next_in,n=e.input,_=l+(e.avail_in-5),y=e.next_out,B=e.output,p=y-(r-e.avail_out),w=y+(e.avail_out-257),o=i.dmax,f=i.wsize,s=i.whave,m=i.wnext,d=i.window,b=i.hold,k=i.bits,S=i.lencode,E=i.distcode,D=(1<<i.lenbits)-1,O=(1<<i.distbits)-1;t:do{k<15&&(b+=n[l++]<<k,k+=8,b+=n[l++]<<k,k+=8),N=S[b&D];e:for(;;){if(b>>>=T=N>>>24,k-=T,(T=N>>>16&255)===0)B[y++]=65535&N;else{if(!(16&T)){if(!(64&T)){N=S[(65535&N)+(b&(1<<T)-1)];continue e}if(32&T){i.mode=12;break t}e.msg="invalid literal/length code",i.mode=30;break t}W=65535&N,(T&=15)&&(k<T&&(b+=n[l++]<<k,k+=8),W+=b&(1<<T)-1,b>>>=T,k-=T),k<15&&(b+=n[l++]<<k,k+=8,b+=n[l++]<<k,k+=8),N=E[b&O];r:for(;;){if(b>>>=T=N>>>24,k-=T,!(16&(T=N>>>16&255))){if(!(64&T)){N=E[(65535&N)+(b&(1<<T)-1)];continue r}e.msg="invalid distance code",i.mode=30;break t}if(X=65535&N,k<(T&=15)&&(b+=n[l++]<<k,(k+=8)<T&&(b+=n[l++]<<k,k+=8)),o<(X+=b&(1<<T)-1)){e.msg="invalid distance too far back",i.mode=30;break t}if(b>>>=T,k-=T,(T=y-p)<X){if(s<(T=X-T)&&i.sane){e.msg="invalid distance too far back",i.mode=30;break t}if(L=d,(v=0)===m){if(v+=f-T,T<W){for(W-=T;B[y++]=d[v++],--T;);v=y-X,L=B}}else if(m<T){if(v+=f+m-T,(T-=m)<W){for(W-=T;B[y++]=d[v++],--T;);if(v=0,m<W){for(W-=T=m;B[y++]=d[v++],--T;);v=y-X,L=B}}}else if(v+=m-T,T<W){for(W-=T;B[y++]=d[v++],--T;);v=y-X,L=B}for(;2<W;)B[y++]=L[v++],B[y++]=L[v++],B[y++]=L[v++],W-=3;W&&(B[y++]=L[v++],1<W&&(B[y++]=L[v++]))}else{for(v=y-X;B[y++]=B[v++],B[y++]=B[v++],B[y++]=B[v++],2<(W-=3););W&&(B[y++]=B[v++],1<W&&(B[y++]=B[v++]))}break}}break}}while(l<_&&y<w);l-=W=k>>3,b&=(1<<(k-=W<<3))-1,e.next_in=l,e.next_out=y,e.avail_in=l<_?_-l+5:5-(l-_),e.avail_out=y<w?w-y+257:257-(y-w),i.hold=b,i.bits=k}},{}],49:[function(c,u,a){"use strict";var e=c("../utils/common"),r=c("./adler32"),i=c("./crc32"),l=c("./inffast"),_=c("./inftrees"),y=1,p=2,w=0,o=-2,f=1,s=852,m=592;function d(v){return(v>>>24&255)+(v>>>8&65280)+((65280&v)<<8)+((255&v)<<24)}function b(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new e.Buf16(320),this.work=new e.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function k(v){var L;return v&&v.state?(L=v.state,v.total_in=v.total_out=L.total=0,v.msg="",L.wrap&&(v.adler=1&L.wrap),L.mode=f,L.last=0,L.havedict=0,L.dmax=32768,L.head=null,L.hold=0,L.bits=0,L.lencode=L.lendyn=new e.Buf32(s),L.distcode=L.distdyn=new e.Buf32(m),L.sane=1,L.back=-1,w):o}function S(v){var L;return v&&v.state?((L=v.state).wsize=0,L.whave=0,L.wnext=0,k(v)):o}function E(v,L){var n,B;return v&&v.state?(B=v.state,L<0?(n=0,L=-L):(n=1+(L>>4),L<48&&(L&=15)),L&&(L<8||15<L)?o:(B.window!==null&&B.wbits!==L&&(B.window=null),B.wrap=n,B.wbits=L,S(v))):o}function D(v,L){var n,B;return v?(B=new b,(v.state=B).window=null,(n=E(v,L))!==w&&(v.state=null),n):o}var O,N,T=!0;function W(v){if(T){var L;for(O=new e.Buf32(512),N=new e.Buf32(32),L=0;L<144;)v.lens[L++]=8;for(;L<256;)v.lens[L++]=9;for(;L<280;)v.lens[L++]=7;for(;L<288;)v.lens[L++]=8;for(_(y,v.lens,0,288,O,0,v.work,{bits:9}),L=0;L<32;)v.lens[L++]=5;_(p,v.lens,0,32,N,0,v.work,{bits:5}),T=!1}v.lencode=O,v.lenbits=9,v.distcode=N,v.distbits=5}function X(v,L,n,B){var V,M=v.state;return M.window===null&&(M.wsize=1<<M.wbits,M.wnext=0,M.whave=0,M.window=new e.Buf8(M.wsize)),B>=M.wsize?(e.arraySet(M.window,L,n-M.wsize,M.wsize,0),M.wnext=0,M.whave=M.wsize):(B<(V=M.wsize-M.wnext)&&(V=B),e.arraySet(M.window,L,n-B,V,M.wnext),(B-=V)?(e.arraySet(M.window,L,n-B,B,0),M.wnext=B,M.whave=M.wsize):(M.wnext+=V,M.wnext===M.wsize&&(M.wnext=0),M.whave<M.wsize&&(M.whave+=V))),0}a.inflateReset=S,a.inflateReset2=E,a.inflateResetKeep=k,a.inflateInit=function(v){return D(v,15)},a.inflateInit2=D,a.inflate=function(v,L){var n,B,V,M,J,U,Y,A,C,K,$,Z,nt,ot,Q,et,st,it,ut,dt,t,F,z,g,h=0,x=new e.Buf8(4),R=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!v||!v.state||!v.output||!v.input&&v.avail_in!==0)return o;(n=v.state).mode===12&&(n.mode=13),J=v.next_out,V=v.output,Y=v.avail_out,M=v.next_in,B=v.input,U=v.avail_in,A=n.hold,C=n.bits,K=U,$=Y,F=w;t:for(;;)switch(n.mode){case f:if(n.wrap===0){n.mode=13;break}for(;C<16;){if(U===0)break t;U--,A+=B[M++]<<C,C+=8}if(2&n.wrap&&A===35615){x[n.check=0]=255&A,x[1]=A>>>8&255,n.check=i(n.check,x,2,0),C=A=0,n.mode=2;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&A)<<8)+(A>>8))%31){v.msg="incorrect header check",n.mode=30;break}if((15&A)!=8){v.msg="unknown compression method",n.mode=30;break}if(C-=4,t=8+(15&(A>>>=4)),n.wbits===0)n.wbits=t;else if(t>n.wbits){v.msg="invalid window size",n.mode=30;break}n.dmax=1<<t,v.adler=n.check=1,n.mode=512&A?10:12,C=A=0;break;case 2:for(;C<16;){if(U===0)break t;U--,A+=B[M++]<<C,C+=8}if(n.flags=A,(255&n.flags)!=8){v.msg="unknown compression method",n.mode=30;break}if(57344&n.flags){v.msg="unknown header flags set",n.mode=30;break}n.head&&(n.head.text=A>>8&1),512&n.flags&&(x[0]=255&A,x[1]=A>>>8&255,n.check=i(n.check,x,2,0)),C=A=0,n.mode=3;case 3:for(;C<32;){if(U===0)break t;U--,A+=B[M++]<<C,C+=8}n.head&&(n.head.time=A),512&n.flags&&(x[0]=255&A,x[1]=A>>>8&255,x[2]=A>>>16&255,x[3]=A>>>24&255,n.check=i(n.check,x,4,0)),C=A=0,n.mode=4;case 4:for(;C<16;){if(U===0)break t;U--,A+=B[M++]<<C,C+=8}n.head&&(n.head.xflags=255&A,n.head.os=A>>8),512&n.flags&&(x[0]=255&A,x[1]=A>>>8&255,n.check=i(n.check,x,2,0)),C=A=0,n.mode=5;case 5:if(1024&n.flags){for(;C<16;){if(U===0)break t;U--,A+=B[M++]<<C,C+=8}n.length=A,n.head&&(n.head.extra_len=A),512&n.flags&&(x[0]=255&A,x[1]=A>>>8&255,n.check=i(n.check,x,2,0)),C=A=0}else n.head&&(n.head.extra=null);n.mode=6;case 6:if(1024&n.flags&&(U<(Z=n.length)&&(Z=U),Z&&(n.head&&(t=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),e.arraySet(n.head.extra,B,M,Z,t)),512&n.flags&&(n.check=i(n.check,B,Z,M)),U-=Z,M+=Z,n.length-=Z),n.length))break t;n.length=0,n.mode=7;case 7:if(2048&n.flags){if(U===0)break t;for(Z=0;t=B[M+Z++],n.head&&t&&n.length<65536&&(n.head.name+=String.fromCharCode(t)),t&&Z<U;);if(512&n.flags&&(n.check=i(n.check,B,Z,M)),U-=Z,M+=Z,t)break t}else n.head&&(n.head.name=null);n.length=0,n.mode=8;case 8:if(4096&n.flags){if(U===0)break t;for(Z=0;t=B[M+Z++],n.head&&t&&n.length<65536&&(n.head.comment+=String.fromCharCode(t)),t&&Z<U;);if(512&n.flags&&(n.check=i(n.check,B,Z,M)),U-=Z,M+=Z,t)break t}else n.head&&(n.head.comment=null);n.mode=9;case 9:if(512&n.flags){for(;C<16;){if(U===0)break t;U--,A+=B[M++]<<C,C+=8}if(A!==(65535&n.check)){v.msg="header crc mismatch",n.mode=30;break}C=A=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),v.adler=n.check=0,n.mode=12;break;case 10:for(;C<32;){if(U===0)break t;U--,A+=B[M++]<<C,C+=8}v.adler=n.check=d(A),C=A=0,n.mode=11;case 11:if(n.havedict===0)return v.next_out=J,v.avail_out=Y,v.next_in=M,v.avail_in=U,n.hold=A,n.bits=C,2;v.adler=n.check=1,n.mode=12;case 12:if(L===5||L===6)break t;case 13:if(n.last){A>>>=7&C,C-=7&C,n.mode=27;break}for(;C<3;){if(U===0)break t;U--,A+=B[M++]<<C,C+=8}switch(n.last=1&A,C-=1,3&(A>>>=1)){case 0:n.mode=14;break;case 1:if(W(n),n.mode=20,L!==6)break;A>>>=2,C-=2;break t;case 2:n.mode=17;break;case 3:v.msg="invalid block type",n.mode=30}A>>>=2,C-=2;break;case 14:for(A>>>=7&C,C-=7&C;C<32;){if(U===0)break t;U--,A+=B[M++]<<C,C+=8}if((65535&A)!=(A>>>16^65535)){v.msg="invalid stored block lengths",n.mode=30;break}if(n.length=65535&A,C=A=0,n.mode=15,L===6)break t;case 15:n.mode=16;case 16:if(Z=n.length){if(U<Z&&(Z=U),Y<Z&&(Z=Y),Z===0)break t;e.arraySet(V,B,M,Z,J),U-=Z,M+=Z,Y-=Z,J+=Z,n.length-=Z;break}n.mode=12;break;case 17:for(;C<14;){if(U===0)break t;U--,A+=B[M++]<<C,C+=8}if(n.nlen=257+(31&A),A>>>=5,C-=5,n.ndist=1+(31&A),A>>>=5,C-=5,n.ncode=4+(15&A),A>>>=4,C-=4,286<n.nlen||30<n.ndist){v.msg="too many length or distance symbols",n.mode=30;break}n.have=0,n.mode=18;case 18:for(;n.have<n.ncode;){for(;C<3;){if(U===0)break t;U--,A+=B[M++]<<C,C+=8}n.lens[R[n.have++]]=7&A,A>>>=3,C-=3}for(;n.have<19;)n.lens[R[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,z={bits:n.lenbits},F=_(0,n.lens,0,19,n.lencode,0,n.work,z),n.lenbits=z.bits,F){v.msg="invalid code lengths set",n.mode=30;break}n.have=0,n.mode=19;case 19:for(;n.have<n.nlen+n.ndist;){for(;et=(h=n.lencode[A&(1<<n.lenbits)-1])>>>16&255,st=65535&h,!((Q=h>>>24)<=C);){if(U===0)break t;U--,A+=B[M++]<<C,C+=8}if(st<16)A>>>=Q,C-=Q,n.lens[n.have++]=st;else{if(st===16){for(g=Q+2;C<g;){if(U===0)break t;U--,A+=B[M++]<<C,C+=8}if(A>>>=Q,C-=Q,n.have===0){v.msg="invalid bit length repeat",n.mode=30;break}t=n.lens[n.have-1],Z=3+(3&A),A>>>=2,C-=2}else if(st===17){for(g=Q+3;C<g;){if(U===0)break t;U--,A+=B[M++]<<C,C+=8}C-=Q,t=0,Z=3+(7&(A>>>=Q)),A>>>=3,C-=3}else{for(g=Q+7;C<g;){if(U===0)break t;U--,A+=B[M++]<<C,C+=8}C-=Q,t=0,Z=11+(127&(A>>>=Q)),A>>>=7,C-=7}if(n.have+Z>n.nlen+n.ndist){v.msg="invalid bit length repeat",n.mode=30;break}for(;Z--;)n.lens[n.have++]=t}}if(n.mode===30)break;if(n.lens[256]===0){v.msg="invalid code -- missing end-of-block",n.mode=30;break}if(n.lenbits=9,z={bits:n.lenbits},F=_(y,n.lens,0,n.nlen,n.lencode,0,n.work,z),n.lenbits=z.bits,F){v.msg="invalid literal/lengths set",n.mode=30;break}if(n.distbits=6,n.distcode=n.distdyn,z={bits:n.distbits},F=_(p,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,z),n.distbits=z.bits,F){v.msg="invalid distances set",n.mode=30;break}if(n.mode=20,L===6)break t;case 20:n.mode=21;case 21:if(6<=U&&258<=Y){v.next_out=J,v.avail_out=Y,v.next_in=M,v.avail_in=U,n.hold=A,n.bits=C,l(v,$),J=v.next_out,V=v.output,Y=v.avail_out,M=v.next_in,B=v.input,U=v.avail_in,A=n.hold,C=n.bits,n.mode===12&&(n.back=-1);break}for(n.back=0;et=(h=n.lencode[A&(1<<n.lenbits)-1])>>>16&255,st=65535&h,!((Q=h>>>24)<=C);){if(U===0)break t;U--,A+=B[M++]<<C,C+=8}if(et&&!(240&et)){for(it=Q,ut=et,dt=st;et=(h=n.lencode[dt+((A&(1<<it+ut)-1)>>it)])>>>16&255,st=65535&h,!(it+(Q=h>>>24)<=C);){if(U===0)break t;U--,A+=B[M++]<<C,C+=8}A>>>=it,C-=it,n.back+=it}if(A>>>=Q,C-=Q,n.back+=Q,n.length=st,et===0){n.mode=26;break}if(32&et){n.back=-1,n.mode=12;break}if(64&et){v.msg="invalid literal/length code",n.mode=30;break}n.extra=15&et,n.mode=22;case 22:if(n.extra){for(g=n.extra;C<g;){if(U===0)break t;U--,A+=B[M++]<<C,C+=8}n.length+=A&(1<<n.extra)-1,A>>>=n.extra,C-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=23;case 23:for(;et=(h=n.distcode[A&(1<<n.distbits)-1])>>>16&255,st=65535&h,!((Q=h>>>24)<=C);){if(U===0)break t;U--,A+=B[M++]<<C,C+=8}if(!(240&et)){for(it=Q,ut=et,dt=st;et=(h=n.distcode[dt+((A&(1<<it+ut)-1)>>it)])>>>16&255,st=65535&h,!(it+(Q=h>>>24)<=C);){if(U===0)break t;U--,A+=B[M++]<<C,C+=8}A>>>=it,C-=it,n.back+=it}if(A>>>=Q,C-=Q,n.back+=Q,64&et){v.msg="invalid distance code",n.mode=30;break}n.offset=st,n.extra=15&et,n.mode=24;case 24:if(n.extra){for(g=n.extra;C<g;){if(U===0)break t;U--,A+=B[M++]<<C,C+=8}n.offset+=A&(1<<n.extra)-1,A>>>=n.extra,C-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){v.msg="invalid distance too far back",n.mode=30;break}n.mode=25;case 25:if(Y===0)break t;if(Z=$-Y,n.offset>Z){if((Z=n.offset-Z)>n.whave&&n.sane){v.msg="invalid distance too far back",n.mode=30;break}nt=Z>n.wnext?(Z-=n.wnext,n.wsize-Z):n.wnext-Z,Z>n.length&&(Z=n.length),ot=n.window}else ot=V,nt=J-n.offset,Z=n.length;for(Y<Z&&(Z=Y),Y-=Z,n.length-=Z;V[J++]=ot[nt++],--Z;);n.length===0&&(n.mode=21);break;case 26:if(Y===0)break t;V[J++]=n.length,Y--,n.mode=21;break;case 27:if(n.wrap){for(;C<32;){if(U===0)break t;U--,A|=B[M++]<<C,C+=8}if($-=Y,v.total_out+=$,n.total+=$,$&&(v.adler=n.check=n.flags?i(n.check,V,$,J-$):r(n.check,V,$,J-$)),$=Y,(n.flags?A:d(A))!==n.check){v.msg="incorrect data check",n.mode=30;break}C=A=0}n.mode=28;case 28:if(n.wrap&&n.flags){for(;C<32;){if(U===0)break t;U--,A+=B[M++]<<C,C+=8}if(A!==(4294967295&n.total)){v.msg="incorrect length check",n.mode=30;break}C=A=0}n.mode=29;case 29:F=1;break t;case 30:F=-3;break t;case 31:return-4;case 32:default:return o}return v.next_out=J,v.avail_out=Y,v.next_in=M,v.avail_in=U,n.hold=A,n.bits=C,(n.wsize||$!==v.avail_out&&n.mode<30&&(n.mode<27||L!==4))&&X(v,v.output,v.next_out,$-v.avail_out)?(n.mode=31,-4):(K-=v.avail_in,$-=v.avail_out,v.total_in+=K,v.total_out+=$,n.total+=$,n.wrap&&$&&(v.adler=n.check=n.flags?i(n.check,V,$,v.next_out-$):r(n.check,V,$,v.next_out-$)),v.data_type=n.bits+(n.last?64:0)+(n.mode===12?128:0)+(n.mode===20||n.mode===15?256:0),(K==0&&$===0||L===4)&&F===w&&(F=-5),F)},a.inflateEnd=function(v){if(!v||!v.state)return o;var L=v.state;return L.window&&(L.window=null),v.state=null,w},a.inflateGetHeader=function(v,L){var n;return v&&v.state&&2&(n=v.state).wrap?((n.head=L).done=!1,w):o},a.inflateSetDictionary=function(v,L){var n,B=L.length;return v&&v.state?(n=v.state).wrap!==0&&n.mode!==11?o:n.mode===11&&r(1,L,B,0)!==n.check?-3:X(v,L,B,B)?(n.mode=31,-4):(n.havedict=1,w):o},a.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(c,u,a){"use strict";var e=c("../utils/common"),r=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],i=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],l=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],_=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];u.exports=function(y,p,w,o,f,s,m,d){var b,k,S,E,D,O,N,T,W,X=d.bits,v=0,L=0,n=0,B=0,V=0,M=0,J=0,U=0,Y=0,A=0,C=null,K=0,$=new e.Buf16(16),Z=new e.Buf16(16),nt=null,ot=0;for(v=0;v<=15;v++)$[v]=0;for(L=0;L<o;L++)$[p[w+L]]++;for(V=X,B=15;1<=B&&$[B]===0;B--);if(B<V&&(V=B),B===0)return f[s++]=20971520,f[s++]=20971520,d.bits=1,0;for(n=1;n<B&&$[n]===0;n++);for(V<n&&(V=n),v=U=1;v<=15;v++)if(U<<=1,(U-=$[v])<0)return-1;if(0<U&&(y===0||B!==1))return-1;for(Z[1]=0,v=1;v<15;v++)Z[v+1]=Z[v]+$[v];for(L=0;L<o;L++)p[w+L]!==0&&(m[Z[p[w+L]]++]=L);if(O=y===0?(C=nt=m,19):y===1?(C=r,K-=257,nt=i,ot-=257,256):(C=l,nt=_,-1),v=n,D=s,J=L=A=0,S=-1,E=(Y=1<<(M=V))-1,y===1&&852<Y||y===2&&592<Y)return 1;for(;;){for(N=v-J,W=m[L]<O?(T=0,m[L]):m[L]>O?(T=nt[ot+m[L]],C[K+m[L]]):(T=96,0),b=1<<v-J,n=k=1<<M;f[D+(A>>J)+(k-=b)]=N<<24|T<<16|W|0,k!==0;);for(b=1<<v-1;A&b;)b>>=1;if(b!==0?(A&=b-1,A+=b):A=0,L++,--$[v]==0){if(v===B)break;v=p[w+m[L]]}if(V<v&&(A&E)!==S){for(J===0&&(J=V),D+=n,U=1<<(M=v-J);M+J<B&&!((U-=$[M+J])<=0);)M++,U<<=1;if(Y+=1<<M,y===1&&852<Y||y===2&&592<Y)return 1;f[S=A&E]=V<<24|M<<16|D-s|0}}return A!==0&&(f[D+A]=v-J<<24|64<<16|0),d.bits=V,0}},{"../utils/common":41}],51:[function(c,u,a){"use strict";u.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(c,u,a){"use strict";var e=c("../utils/common"),r=0,i=1;function l(h){for(var x=h.length;0<=--x;)h[x]=0}var _=0,y=29,p=256,w=p+1+y,o=30,f=19,s=2*w+1,m=15,d=16,b=7,k=256,S=16,E=17,D=18,O=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],N=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],T=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],W=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],X=new Array(2*(w+2));l(X);var v=new Array(2*o);l(v);var L=new Array(512);l(L);var n=new Array(256);l(n);var B=new Array(y);l(B);var V,M,J,U=new Array(o);function Y(h,x,R,P,I){this.static_tree=h,this.extra_bits=x,this.extra_base=R,this.elems=P,this.max_length=I,this.has_stree=h&&h.length}function A(h,x){this.dyn_tree=h,this.max_code=0,this.stat_desc=x}function C(h){return h<256?L[h]:L[256+(h>>>7)]}function K(h,x){h.pending_buf[h.pending++]=255&x,h.pending_buf[h.pending++]=x>>>8&255}function $(h,x,R){h.bi_valid>d-R?(h.bi_buf|=x<<h.bi_valid&65535,K(h,h.bi_buf),h.bi_buf=x>>d-h.bi_valid,h.bi_valid+=R-d):(h.bi_buf|=x<<h.bi_valid&65535,h.bi_valid+=R)}function Z(h,x,R){$(h,R[2*x],R[2*x+1])}function nt(h,x){for(var R=0;R|=1&h,h>>>=1,R<<=1,0<--x;);return R>>>1}function ot(h,x,R){var P,I,j=new Array(m+1),G=0;for(P=1;P<=m;P++)j[P]=G=G+R[P-1]<<1;for(I=0;I<=x;I++){var H=h[2*I+1];H!==0&&(h[2*I]=nt(j[H]++,H))}}function Q(h){var x;for(x=0;x<w;x++)h.dyn_ltree[2*x]=0;for(x=0;x<o;x++)h.dyn_dtree[2*x]=0;for(x=0;x<f;x++)h.bl_tree[2*x]=0;h.dyn_ltree[2*k]=1,h.opt_len=h.static_len=0,h.last_lit=h.matches=0}function et(h){8<h.bi_valid?K(h,h.bi_buf):0<h.bi_valid&&(h.pending_buf[h.pending++]=h.bi_buf),h.bi_buf=0,h.bi_valid=0}function st(h,x,R,P){var I=2*x,j=2*R;return h[I]<h[j]||h[I]===h[j]&&P[x]<=P[R]}function it(h,x,R){for(var P=h.heap[R],I=R<<1;I<=h.heap_len&&(I<h.heap_len&&st(x,h.heap[I+1],h.heap[I],h.depth)&&I++,!st(x,P,h.heap[I],h.depth));)h.heap[R]=h.heap[I],R=I,I<<=1;h.heap[R]=P}function ut(h,x,R){var P,I,j,G,H=0;if(h.last_lit!==0)for(;P=h.pending_buf[h.d_buf+2*H]<<8|h.pending_buf[h.d_buf+2*H+1],I=h.pending_buf[h.l_buf+H],H++,P===0?Z(h,I,x):(Z(h,(j=n[I])+p+1,x),(G=O[j])!==0&&$(h,I-=B[j],G),Z(h,j=C(--P),R),(G=N[j])!==0&&$(h,P-=U[j],G)),H<h.last_lit;);Z(h,k,x)}function dt(h,x){var R,P,I,j=x.dyn_tree,G=x.stat_desc.static_tree,H=x.stat_desc.has_stree,q=x.stat_desc.elems,rt=-1;for(h.heap_len=0,h.heap_max=s,R=0;R<q;R++)j[2*R]!==0?(h.heap[++h.heap_len]=rt=R,h.depth[R]=0):j[2*R+1]=0;for(;h.heap_len<2;)j[2*(I=h.heap[++h.heap_len]=rt<2?++rt:0)]=1,h.depth[I]=0,h.opt_len--,H&&(h.static_len-=G[2*I+1]);for(x.max_code=rt,R=h.heap_len>>1;1<=R;R--)it(h,j,R);for(I=q;R=h.heap[1],h.heap[1]=h.heap[h.heap_len--],it(h,j,1),P=h.heap[1],h.heap[--h.heap_max]=R,h.heap[--h.heap_max]=P,j[2*I]=j[2*R]+j[2*P],h.depth[I]=(h.depth[R]>=h.depth[P]?h.depth[R]:h.depth[P])+1,j[2*R+1]=j[2*P+1]=I,h.heap[1]=I++,it(h,j,1),2<=h.heap_len;);h.heap[--h.heap_max]=h.heap[1],function(tt,ct){var gt,ht,_t,at,kt,Lt,ft=ct.dyn_tree,Rt=ct.max_code,Yt=ct.stat_desc.static_tree,Vt=ct.stat_desc.has_stree,Jt=ct.stat_desc.extra_bits,Pt=ct.stat_desc.extra_base,bt=ct.stat_desc.max_length,xt=0;for(at=0;at<=m;at++)tt.bl_count[at]=0;for(ft[2*tt.heap[tt.heap_max]+1]=0,gt=tt.heap_max+1;gt<s;gt++)bt<(at=ft[2*ft[2*(ht=tt.heap[gt])+1]+1]+1)&&(at=bt,xt++),ft[2*ht+1]=at,Rt<ht||(tt.bl_count[at]++,kt=0,Pt<=ht&&(kt=Jt[ht-Pt]),Lt=ft[2*ht],tt.opt_len+=Lt*(at+kt),Vt&&(tt.static_len+=Lt*(Yt[2*ht+1]+kt)));if(xt!==0){do{for(at=bt-1;tt.bl_count[at]===0;)at--;tt.bl_count[at]--,tt.bl_count[at+1]+=2,tt.bl_count[bt]--,xt-=2}while(0<xt);for(at=bt;at!==0;at--)for(ht=tt.bl_count[at];ht!==0;)Rt<(_t=tt.heap[--gt])||(ft[2*_t+1]!==at&&(tt.opt_len+=(at-ft[2*_t+1])*ft[2*_t],ft[2*_t+1]=at),ht--)}}(h,x),ot(j,rt,h.bl_count)}function t(h,x,R){var P,I,j=-1,G=x[1],H=0,q=7,rt=4;for(G===0&&(q=138,rt=3),x[2*(R+1)+1]=65535,P=0;P<=R;P++)I=G,G=x[2*(P+1)+1],++H<q&&I===G||(H<rt?h.bl_tree[2*I]+=H:I!==0?(I!==j&&h.bl_tree[2*I]++,h.bl_tree[2*S]++):H<=10?h.bl_tree[2*E]++:h.bl_tree[2*D]++,j=I,rt=(H=0)===G?(q=138,3):I===G?(q=6,3):(q=7,4))}function F(h,x,R){var P,I,j=-1,G=x[1],H=0,q=7,rt=4;for(G===0&&(q=138,rt=3),P=0;P<=R;P++)if(I=G,G=x[2*(P+1)+1],!(++H<q&&I===G)){if(H<rt)for(;Z(h,I,h.bl_tree),--H!=0;);else I!==0?(I!==j&&(Z(h,I,h.bl_tree),H--),Z(h,S,h.bl_tree),$(h,H-3,2)):H<=10?(Z(h,E,h.bl_tree),$(h,H-3,3)):(Z(h,D,h.bl_tree),$(h,H-11,7));j=I,rt=(H=0)===G?(q=138,3):I===G?(q=6,3):(q=7,4)}}l(U);var z=!1;function g(h,x,R,P){$(h,(_<<1)+(P?1:0),3),function(I,j,G,H){et(I),H&&(K(I,G),K(I,~G)),e.arraySet(I.pending_buf,I.window,j,G,I.pending),I.pending+=G}(h,x,R,!0)}a._tr_init=function(h){z||(function(){var x,R,P,I,j,G=new Array(m+1);for(I=P=0;I<y-1;I++)for(B[I]=P,x=0;x<1<<O[I];x++)n[P++]=I;for(n[P-1]=I,I=j=0;I<16;I++)for(U[I]=j,x=0;x<1<<N[I];x++)L[j++]=I;for(j>>=7;I<o;I++)for(U[I]=j<<7,x=0;x<1<<N[I]-7;x++)L[256+j++]=I;for(R=0;R<=m;R++)G[R]=0;for(x=0;x<=143;)X[2*x+1]=8,x++,G[8]++;for(;x<=255;)X[2*x+1]=9,x++,G[9]++;for(;x<=279;)X[2*x+1]=7,x++,G[7]++;for(;x<=287;)X[2*x+1]=8,x++,G[8]++;for(ot(X,w+1,G),x=0;x<o;x++)v[2*x+1]=5,v[2*x]=nt(x,5);V=new Y(X,O,p+1,w,m),M=new Y(v,N,0,o,m),J=new Y(new Array(0),T,0,f,b)}(),z=!0),h.l_desc=new A(h.dyn_ltree,V),h.d_desc=new A(h.dyn_dtree,M),h.bl_desc=new A(h.bl_tree,J),h.bi_buf=0,h.bi_valid=0,Q(h)},a._tr_stored_block=g,a._tr_flush_block=function(h,x,R,P){var I,j,G=0;0<h.level?(h.strm.data_type===2&&(h.strm.data_type=function(H){var q,rt=4093624447;for(q=0;q<=31;q++,rt>>>=1)if(1&rt&&H.dyn_ltree[2*q]!==0)return r;if(H.dyn_ltree[18]!==0||H.dyn_ltree[20]!==0||H.dyn_ltree[26]!==0)return i;for(q=32;q<p;q++)if(H.dyn_ltree[2*q]!==0)return i;return r}(h)),dt(h,h.l_desc),dt(h,h.d_desc),G=function(H){var q;for(t(H,H.dyn_ltree,H.l_desc.max_code),t(H,H.dyn_dtree,H.d_desc.max_code),dt(H,H.bl_desc),q=f-1;3<=q&&H.bl_tree[2*W[q]+1]===0;q--);return H.opt_len+=3*(q+1)+5+5+4,q}(h),I=h.opt_len+3+7>>>3,(j=h.static_len+3+7>>>3)<=I&&(I=j)):I=j=R+5,R+4<=I&&x!==-1?g(h,x,R,P):h.strategy===4||j===I?($(h,2+(P?1:0),3),ut(h,X,v)):($(h,4+(P?1:0),3),function(H,q,rt,tt){var ct;for($(H,q-257,5),$(H,rt-1,5),$(H,tt-4,4),ct=0;ct<tt;ct++)$(H,H.bl_tree[2*W[ct]+1],3);F(H,H.dyn_ltree,q-1),F(H,H.dyn_dtree,rt-1)}(h,h.l_desc.max_code+1,h.d_desc.max_code+1,G+1),ut(h,h.dyn_ltree,h.dyn_dtree)),Q(h),P&&et(h)},a._tr_tally=function(h,x,R){return h.pending_buf[h.d_buf+2*h.last_lit]=x>>>8&255,h.pending_buf[h.d_buf+2*h.last_lit+1]=255&x,h.pending_buf[h.l_buf+h.last_lit]=255&R,h.last_lit++,x===0?h.dyn_ltree[2*R]++:(h.matches++,x--,h.dyn_ltree[2*(n[R]+p+1)]++,h.dyn_dtree[2*C(x)]++),h.last_lit===h.lit_bufsize-1},a._tr_align=function(h){$(h,2,3),Z(h,k,X),function(x){x.bi_valid===16?(K(x,x.bi_buf),x.bi_buf=0,x.bi_valid=0):8<=x.bi_valid&&(x.pending_buf[x.pending++]=255&x.bi_buf,x.bi_buf>>=8,x.bi_valid-=8)}(h)}},{"../utils/common":41}],53:[function(c,u,a){"use strict";u.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(c,u,a){(function(e){(function(r,i){"use strict";if(!r.setImmediate){var l,_,y,p,w=1,o={},f=!1,s=r.document,m=Object.getPrototypeOf&&Object.getPrototypeOf(r);m=m&&m.setTimeout?m:r,l={}.toString.call(r.process)==="[object process]"?function(S){process.nextTick(function(){b(S)})}:function(){if(r.postMessage&&!r.importScripts){var S=!0,E=r.onmessage;return r.onmessage=function(){S=!1},r.postMessage("","*"),r.onmessage=E,S}}()?(p="setImmediate$"+Math.random()+"$",r.addEventListener?r.addEventListener("message",k,!1):r.attachEvent("onmessage",k),function(S){r.postMessage(p+S,"*")}):r.MessageChannel?((y=new MessageChannel).port1.onmessage=function(S){b(S.data)},function(S){y.port2.postMessage(S)}):s&&"onreadystatechange"in s.createElement("script")?(_=s.documentElement,function(S){var E=s.createElement("script");E.onreadystatechange=function(){b(S),E.onreadystatechange=null,_.removeChild(E),E=null},_.appendChild(E)}):function(S){setTimeout(b,0,S)},m.setImmediate=function(S){typeof S!="function"&&(S=new Function(""+S));for(var E=new Array(arguments.length-1),D=0;D<E.length;D++)E[D]=arguments[D+1];var O={callback:S,args:E};return o[w]=O,l(w),w++},m.clearImmediate=d}function d(S){delete o[S]}function b(S){if(f)setTimeout(b,0,S);else{var E=o[S];if(E){f=!0;try{(function(D){var O=D.callback,N=D.args;switch(N.length){case 0:O();break;case 1:O(N[0]);break;case 2:O(N[0],N[1]);break;case 3:O(N[0],N[1],N[2]);break;default:O.apply(i,N)}})(E)}finally{d(S),f=!1}}}}function k(S){S.source===r&&typeof S.data=="string"&&S.data.indexOf(p)===0&&b(+S.data.slice(p.length))}})(typeof self>"u"?e===void 0?this:e:self)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})});var oe=1e3/20,Et=class extends HTMLElement{intervalId=null;item;size=64;constructor(){super()}async connectedCallback(){let u=this.attachShadow({mode:"open"}),a=this.item;if(!a||!a.animation)throw new Error("animated item is required");let e=document.createElement("canvas"),r=a.image.width,i=a.animation;e.width=r,e.height=r,e.style.imageRendering="pixelated",e.style.width=`${this.size}px`,e.style.height=`${this.size}px`;let l=e.getContext("2d",{willReadFrequently:!0});if(!l)throw new Error("No canvas context");l.imageSmoothingEnabled=!1;let _=0,y=0,p=le(a.image),w=r**2*4;this.intervalId=setInterval(()=>{y++>=i.frames[_].frameTime&&(y=0,_=(_+1)%i.frames.length);let o=r*i.frames[_].index;if(l.clearRect(0,0,r,r),l.drawImage(a.image,0,o,r,r,0,0,r,r),!i.interpolate)return;let f=y/i.frames[_].frameTime,s=(_+1)%i.frames.length,m=i.frames[s].index,d=w*m,b=l.getImageData(0,0,r,r);for(let k=0;k<b.data.length;k++)b.data[k]=ce(f,b.data[k],p.data[d+k]);l.putImageData(b,0,0,0,0,r,r)},oe),u.append(e)}disconnectedCallback(){this.intervalId!=null&&clearInterval(this.intervalId)}};function ce(c,u,a){return c*(a-u)+u}function le(c){let u=document.createElement("canvas");u.width=c.width,u.height=c.height;let a=u.getContext("2d");if(!a)throw new Error("No canvas context");return a.imageSmoothingEnabled=!1,a.drawImage(c,0,0),a.getImageData(0,0,c.width,c.height)}var St=class extends HTMLElement{item;size=64;constructor(){super()}async connectedCallback(){let u=this.attachShadow({mode:"open"}),a=document.createElement("div");a.style.width=`${this.size}px`,a.style.height=`${this.size}px`,a.style.display="flex",a.style.flexDirection="column",a.style.alignItems="center",a.style.justifyContent="center",a.style.backgroundColor="#333",a.style.borderRadius="4px",a.style.cursor="pointer",a.style.transition="background-color 0.2s",a.addEventListener("mouseenter",()=>{a.style.backgroundColor="#444"}),a.addEventListener("mouseleave",()=>{a.style.backgroundColor="#333"});let e=document.createElement("div");e.innerHTML="\u{1F50A}",e.style.fontSize="24px",e.style.marginBottom="4px";let r=document.createElement("button");r.textContent="\u25B6",r.style.background="none",r.style.border="none",r.style.color="white",r.style.fontSize="16px",r.style.cursor="pointer",r.style.padding="4px",r.addEventListener("click",i=>{i.stopPropagation(),this.item?.audio&&(this.item.audio.paused?(this.item.audio.play(),r.textContent="\u23F8"):(this.item.audio.pause(),r.textContent="\u25B6"))}),this.item?.audio&&this.item.audio.addEventListener("ended",()=>{r.textContent="\u25B6"}),a.append(e,r),u.append(a)}};var It=class extends HTMLElement{size=64;item;dataSource;constructor(){super()}async connectedCallback(){let u=this.attachShadow({mode:"open"}),a=document.createElement("div");if(a.style.minWidth=`${this.size}px`,a.style.minHeight=`${this.size}px`,u.append(a),!this.item||!this.dataSource)throw new Error("item and data source are required");let e=await this.dataSource.loadItem(this.item),r=this.getElementForItem(e);a.append(r)}getElementForItem(u){if(u.audio){let e=document.createElement("audio-element");return e.item=u,e.size=this.size,e}if(u.animation&&u.image){let e=document.createElement("animated-texture");return e.item=u,e.size=this.size,e}if(u.image){let e=document.createElement("div");return e.style.backgroundImage=`url("${u.image.src}")`,e.style.backgroundSize="contain",e.style.backgroundRepeat="no-repeat",e.style.backgroundPosition="center",e.style.imageRendering="pixelated",e.style.width=`${this.size}px`,e.style.height=`${this.size}px`,e}let a=document.createElement("div");return a.style.width=`${this.size}px`,a.style.height=`${this.size}px`,a.style.backgroundColor="#666",a.style.display="flex",a.style.alignItems="center",a.style.justifyContent="center",a.textContent="?",a}};var Ct=class extends HTMLElement{teardown;text;constructor(){super()}connectedCallback(){let u=this.attachShadow({mode:"open"}),a=this.text??"",e=document.createElement("div");e.addEventListener("mouseenter",i=>{let l=document.createElement("div");l.classList.add("tooltip"),l.innerText=a,this.positionTooltip(l,i),document.body.append(l);let _=y=>{this.positionTooltip(l,y)};document.body.addEventListener("mousemove",_),this.teardown=()=>{document.body.removeEventListener("mousemove",_),l.remove()}}),e.addEventListener("mouseleave",()=>{this.teardown?.()});let r=document.createElement("slot");e.append(r),u.append(e)}positionTooltip(u,a){let{width:e,height:r}=u.getBoundingClientRect(),i=Nt(window.innerWidth,e,a.clientX),l=Nt(window.innerHeight,r,a.clientY),_=[!i&&`left: ${a.clientX+10}px;`,i&&`right: ${window.innerWidth-a.clientX+10}px;`,!l&&`top: ${a.clientY+10}px;`,l&&`bottom: ${window.innerHeight-a.clientY+10}px;`].filter(y=>y).join("");u.setAttribute("style",_)}disconnectedCallback(){this.teardown?.()}};function Nt(c,u,a){return a>=c-u-10-10}function yt(){return{subfolders:new Map,items:new Map}}function At(c,u){let a=u.width,e=u.height/a,r=c.animation.frametime??1,i=c.animation.interpolate??!1,l=c.animation.frames;return{interpolate:i,frames:l?ue(l,r):de(e,r)}}function de(c,u){return[...new Array(c)].map((a,e)=>({frameTime:u,index:e}))}function ue(c,u){return c.map(a=>typeof a=="number"?{index:a,frameTime:u}:{index:a.index,frameTime:a.time})}var mt=class{constructor(u,a,e,r){this.username=u;this.repo=a;this.branch=e;this.root=r}getNavBarClass(){return"github"}addDescriptionToNav(u){let a=document.createElement("div");a.innerText=`${this.username}/${this.repo}`;let e=document.createElement("div");e.innerText="GitHub",u.append(a),u.append(e)}addItemsToMenu(u){let a=document.createElement("div");a.innerText="View on GitHub",a.addEventListener("click",()=>{window.open(`https://github.com/${this.username}/${this.repo}`)}),u.append(a)}async getRootFolder(u){let a=`https://api.github.com/repos/${this.username}/${this.repo}/git/trees/${this.branch}?recursive=1`,e=await fetch(a),{tree:r}=await e.json(),i=yt(),l;u==="textures"?l=/^(.*)\/(.*)\.png(\.mcmeta)?$/:l=/^(.*)\/(.*)\.ogg$/;for(let _ of r){let y=_.path.match(l);if(!y)continue;let[,p,w,o]=y;if(!p.startsWith(this.root))continue;let f=this.findOrCreateSubfolder(i,p);if(u==="textures"){let s=o!=null;(!f.items.has(w)||s)&&f.items.set(w,{imagePath:`${p}/${w}.png`,mcMetaPath:s?`${p}/${w}.png.mcmeta`:void 0})}else f.items.set(w,{audioPath:`${p}/${w}.ogg`})}return i}async loadItem(u){if(u.audioPath)return{audio:await this.loadAudio(u.audioPath)};if(u.imagePath){let a=await this.loadImage(u.imagePath),e=await this.loadMcMeta(u.mcMetaPath,a);return{image:a,animation:e}}throw new Error("Item has neither imagePath nor audioPath")}findOrCreateSubfolder(u,a){let e=a.split("/"),r=u;for(let i of e)r.subfolders.has(i)||r.subfolders.set(i,yt()),r=r.subfolders.get(i);return r}getGithubUserContentPath(u){return`https://raw.githubusercontent.com/${this.username}/${this.repo}/${this.branch}/${u}`}loadImage(u){return new Promise(a=>{let e=new Image;e.src=this.getGithubUserContentPath(u),e.crossOrigin="anonymous",e.addEventListener("load",()=>{a(e)})})}loadAudio(u){return new Promise(a=>{let e=new Audio;e.src=this.getGithubUserContentPath(u),e.preload="metadata",e.addEventListener("canplaythrough",()=>{a(e)}),e.addEventListener("error",()=>{a(e)})})}async loadMcMeta(u,a){if(u)try{let r=await(await fetch(this.getGithubUserContentPath(u))).json();return At(r,a)}catch(e){console.error(`Couldn't load ${u}:`,e)}}};function Ut(c,u){let a=document.createElement("div");a.classList.add("overlay");let e=document.createElement("div");e.classList.add("modal");let r=document.createElement("texture-loader");r.size=Math.min(window.innerHeight,window.innerWidth)-40,r.dataSource=c,r.item=u,e.append(r),a.addEventListener("click",Ft),e.addEventListener("click",Ft),document.body.append(a),document.body.append(e)}function jt(){document.body.addEventListener("keydown",c=>{c.key==="Escape"&&(c.preventDefault(),Ft())})}function Ft(){document.querySelector(".overlay")?.remove(),document.querySelector(".modal")?.remove()}var Dt=se(Wt()),lt=new Set,pt="textures";async function vt(c){he(c),fe(c),me(c),ge(),pe(),await $t(c)}function he(c){document.querySelector("nav").setAttribute("class",c.getNavBarClass())}function fe(c){let u=document.querySelector(".dataSource");u.innerHTML="",c.addDescriptionToNav(u)}function me(c){let u=document.querySelector("#dataSourceMenuExtraItems");if(u.innerHTML="",c.addItemsToMenu?.(u),u.childNodes.length>0){let a=document.createElement("div");a.classList.add("divider"),u.append(a)}}function pe(){let c=document.querySelector("#search");c.value=""}async function $t(c){let u=await c.getRootFolder(pt),a=Tt(u),e=document.createDocumentFragment();for(let i of a){let l=i.name.toString().trim(),_=[...i.items.entries()].sort((y,p)=>y[0].localeCompare(p[0]));for(let[y,p]of _){let w=y.toLowerCase().trim(),o=`${i.name}/${y}`,f=document.createElement("div");f.classList.add("texture-container"),f.setAttribute("data-searchable-name",`${l}/${w}`),f.setAttribute("data-texture-path",o);let s=document.createElement("tool-tip");s.text=o;let m=document.createElement("texture-loader");m.dataSource=c,m.item=p,s.addEventListener("click",d=>{d.shiftKey?(d.preventDefault(),d.stopPropagation(),lt.has(o)?(lt.delete(o),f.classList.remove("selected")):(lt.add(o),f.classList.add("selected")),zt()):Ut(c,p)}),lt.has(o)&&f.classList.add("selected"),s.append(m),f.append(s),e.append(f)}}let r=document.querySelector("#textures");r.innerHTML="",r.append(e),zt()}function Tt(c){let u=[];for(let[a,e]of c.subfolders){let r=Tt(e);u.push(...r),u.push({name:a,items:e.items})}return u}function ge(){let c=document.querySelector("nav"),u=c.querySelector("#download-selected");u&&u.remove();let a=c.querySelector("#selection-controls");a&&a.remove();let e=c.querySelector("#asset-type-toggle");e&&e.remove();let r=document.createElement("div");r.id="asset-type-toggle",r.classList.add("asset-type-toggle");let i=document.createElement("button");i.textContent="Textures",i.classList.add("toggle-button"),i.classList.toggle("active",pt==="textures"),i.addEventListener("click",()=>Zt("textures"));let l=document.createElement("button");l.textContent="Sounds",l.classList.add("toggle-button"),l.classList.toggle("active",pt==="sounds"),l.addEventListener("click",()=>Zt("sounds")),r.append(i,l);let _=document.createElement("div");_.id="selection-controls",_.classList.add("selection-controls");let y=document.createElement("button");y.textContent="Select All",y.classList.add("selection-button"),y.addEventListener("click",_e);let p=document.createElement("button");p.textContent="Clear Selection",p.classList.add("selection-button"),p.addEventListener("click",be);let w=document.createElement("button");w.id="download-selected",w.textContent="Download ZIP (0)",w.classList.add("download-button"),w.disabled=!0,w.addEventListener("click",we),_.append(y,p,w);let o=c.querySelector("#search");c.insertBefore(r,o),c.insertBefore(_,o)}function zt(){let c=document.querySelector("#download-selected");if(c){let u=lt.size;c.textContent=`Download ZIP (${u})`,c.disabled=u===0}}function _e(){document.querySelectorAll(".texture-container").forEach(u=>{let a=u.getAttribute("data-texture-path");a&&(lt.add(a),u.classList.add("selected"))}),zt()}function be(){lt.clear(),document.querySelectorAll(".texture-container").forEach(u=>{u.classList.remove("selected")}),zt()}async function Zt(c){pt=c,lt.clear();let u=window.currentDataSource;u&&await $t(u);let a=document.querySelector("#asset-type-toggle .toggle-button:first-child"),e=document.querySelector("#asset-type-toggle .toggle-button:last-child");a&&e&&(a.classList.toggle("active",c==="textures"),e.classList.toggle("active",c==="sounds"))}async function we(){if(lt.size===0)return;let c=window.currentDataSource;if(!c){alert("No data source available");return}try{if(lt.size===1){let u=Array.from(lt)[0];await ye(c,u)}else{let u=new Dt.default;for(let i of lt)await Gt(c,i,u);let a=await u.generateAsync({type:"blob"}),e=URL.createObjectURL(a),r=document.createElement("a");r.href=e,r.download="selected_textures.zip",document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(e)}}catch(u){console.error("Error downloading textures:",u),alert("Error downloading textures. Check console for details.")}}async function ye(c,u){let a=u.lastIndexOf("/"),e=u.substring(0,a),r=u.substring(a+1),i=await c.getRootFolder(pt),l=Tt(i),_=null;for(let p of l)if(p.name===e&&p.items.has(r)){_=p.items.get(r);break}if(!_){console.error(`Texture not found: ${u}`);return}let y=await c.loadItem(_);if(y.animation&&y.image){let p=new Dt.default;await Gt(c,u,p);let w=await p.generateAsync({type:"blob"}),o=URL.createObjectURL(w),f=document.createElement("a");f.href=o,f.download=`${r}.zip`,document.body.appendChild(f),f.click(),document.body.removeChild(f),URL.revokeObjectURL(o)}else if(y.image){let p=document.createElement("canvas"),w=p.getContext("2d");p.width=y.image.naturalWidth,p.height=y.image.naturalHeight,w.drawImage(y.image,0,0),p.toBlob(o=>{if(o){let f=URL.createObjectURL(o),s=document.createElement("a");s.href=f,s.download=`${r}.png`,document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(f)}},"image/png")}else y.audio&&console.log("Audio download not yet implemented for single files")}async function Gt(c,u,a){let e=u.lastIndexOf("/"),r=u.substring(0,e),i=u.substring(e+1),l=await c.getRootFolder(pt),_=Tt(l),y=null;for(let f of _)if(f.name===r&&f.items.has(i)){y=f.items.get(i);break}if(!y){console.error(`Texture not found: ${u}`);return}let p=await c.loadItem(y),w=document.createElement("canvas"),o=w.getContext("2d");if(p.animation&&p.image){let f=p.animation.frames[0],s=p.image.width;w.width=s,w.height=s;let m=s*f.index;o.drawImage(p.image,0,m,s,s,0,0,s,s);let d=ve(p.animation);a.file(`${u}.mcmeta`,d)}else if(p.image)w.width=p.image.naturalWidth,w.height=p.image.naturalHeight,o.drawImage(p.image,0,0);else if(p.audio)return;return new Promise(f=>{w.toBlob(s=>{s&&a.file(`${u}.png`,s),f()},"image/png")})}function ve(c){let u={animation:{interpolate:c.interpolate,frames:c.frames.map(a=>({index:a.index,time:a.frameTime}))}};return JSON.stringify(u,null,2)}async function qt(){let c=window.location.hash.split("/");if(c[0]==="#github"&&c[1]&&c[2]&&c[3]){let u=new mt(c[1],c[2],c[3],"");window.currentDataSource=u,await vt(u)}}function Kt(){let c=document.querySelector("#search");c.addEventListener("input",()=>{let u=c.value.toLowerCase();document.querySelectorAll("[data-searchable-name]").forEach(e=>{if(!(e instanceof HTMLElement))return;let i=e.getAttribute("data-searchable-name")?.toLowerCase()?.includes(u);e.style.display=i?"block":"none"})}),document.addEventListener("keydown",u=>{(u.key==="/"||(u.metaKey||u.ctrlKey)&&u.key==="f")&&(u.preventDefault(),c.focus())})}var Ot=class{constructor(u){this.directory=u}getNavBarClass(){return"local"}addDescriptionToNav(u){let a=document.createElement("div");a.innerText=this.directory.name;let e=document.createElement("div");e.innerText="Local",u.append(a),u.append(e)}async getRootFolder(u){return this.loadFoldersRecursively(this.directory,"",u)}async loadItem(u){if(u.audioPath){let a=await this.findAudioFile(u);return{audio:await this.loadAudio(a)}}if(u.imagePath){let{imageHandle:a,mcMetaHandle:e}=await this.findImageAndMcMeta(u),r=await this.loadImage(a),i=await this.loadMcMeta(e,u.mcMetaPath,r);return{image:r,animation:i}}throw new Error("Item has neither imagePath nor audioPath")}async loadFoldersRecursively(u,a,e){let r=yt(),i;e==="textures"?i=/(.*)\.png(\.mcmeta)?/:i=/(.*)\.ogg/;for await(let[l,_]of u.entries()){if(_.kind==="directory"){let o=await this.loadFoldersRecursively(_,`${a}/${l}`,e);r.subfolders.set(l,o);continue}let y=l.match(i);if(!y)continue;let[,p,w]=y;if(e==="textures"){let o=w!=null;(!r.items.has(l)||o)&&r.items.set(p,{imagePath:`${a}/${p}.png`,mcMetaPath:o?`${a}/${p}.png.mcmeta`:void 0})}else r.items.set(p,{audioPath:`${a}/${p}.ogg`})}return r}async findImageAndMcMeta(u){if(!u.imagePath)throw new Error("Item has no imagePath");let a=u.imagePath.slice(1).split("/"),e=this.directory;for(let _ of a.slice(0,-1))e=await e.getDirectoryHandle(_);let r=a.at(-1);if(!r)throw new Error("Couldn't find item");let i=await e.getFileHandle(r),l;return u.mcMetaPath&&(l=await e.getFileHandle(`${r}.mcmeta`)),{imageHandle:i,mcMetaHandle:l}}async findAudioFile(u){if(!u.audioPath)throw new Error("Item has no audioPath");let a=u.audioPath.slice(1).split("/"),e=this.directory;for(let i of a.slice(0,-1))e=await e.getDirectoryHandle(i);let r=a.at(-1);if(!r)throw new Error("Couldn't find audio item");return await e.getFileHandle(r)}async loadImage(u){return new Promise(async a=>{let e=await u.getFile(),r=new FileReader;r.addEventListener("load",()=>{let i=new Image;i.src=r.result,a(i)}),r.readAsDataURL(e)})}async loadAudio(u){return new Promise(async a=>{let e=await u.getFile(),r=new FileReader;r.addEventListener("load",()=>{let i=new Audio;i.src=r.result,i.preload="metadata",a(i)}),r.readAsDataURL(e)})}async loadMcMeta(u,a,e){if(!u)return;let r;try{r=await(await u.getFile()).text();let l=JSON.parse(r);return At(l,e)}catch(i){console.error(`Couldn't load ${a}:`,i,r)}}};function Xt(){let c=document.querySelector("#dataSourceMenuOpenItems"),u=document.createElement("div");u.addEventListener("click",ke),u.innerText="Open from GitHub";let a=document.createElement("div");a.addEventListener("click",xe),a.innerText="Open from your computer",c.append(u),c.append(a)}async function ke(){let c=prompt("Enter the URL to a GitHub repo, and we'll find the textures in it:");if(!c)return;let u=c.match(/^(https?:\/\/)?github\.com\/([^\/]+)\/([^\/]+)/);if(!u)return;let[,,a,e]=u,r=`https://api.github.com/repos/${a}/${e}`,i=await fetch(r),{default_branch:l}=await i.json();window.location.hash=`github/${a}/${e}/${l}`;let _=new mt(a,e,l,"");window.currentDataSource=_,vt(_)}async function xe(){if(!window.showDirectoryPicker){alert("Your browser does not support selecting directories. Try Chrome.");return}let c=await window.showDirectoryPicker();window.location.hash="";let u=new Ot(c);window.currentDataSource=u,vt(u)}window.addEventListener("load",async()=>{Xt(),Kt(),jt(),await qt()});window.customElements.define("animated-texture",Et);window.customElements.define("audio-element",St);window.customElements.define("texture-loader",It);window.customElements.define("tool-tip",Ct);})();
/*! Bundled license information:

jszip/dist/jszip.min.js:
  (*!
  
  JSZip v3.10.1 - A JavaScript class for generating and reading zip files
  <http://stuartk.com/jszip>
  
  (c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
  Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.
  
  JSZip uses the library pako released under the MIT license :
  https://github.com/nodeca/pako/blob/main/LICENSE
  *)
*/
